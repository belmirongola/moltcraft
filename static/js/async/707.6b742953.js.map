{"version":3,"file":"static/js/async/707.6b742953.js","sources":["webpack://minecraft-web-client/./renderer/playground/baseScene.ts","webpack://minecraft-web-client/./renderer/playground/scenes/main.ts","webpack://minecraft-web-client/./renderer/playground/playgroundUi.tsx","webpack://minecraft-web-client/./renderer/playground/scenes/railsCobweb.ts","webpack://minecraft-web-client/./renderer/playground/scenes/floorRandom.ts","webpack://minecraft-web-client/./renderer/playground/scenes/lightingStarfield.ts","webpack://minecraft-web-client/./renderer/playground/scenes/transparencyIssue.ts","webpack://minecraft-web-client/./renderer/playground/scenes/rotationIssue.ts","webpack://minecraft-web-client/./renderer/playground/scenes/entities.ts","webpack://minecraft-web-client/./renderer/playground/scenes/frequentUpdates.ts","webpack://minecraft-web-client/./renderer/playground/scenes/slabsOptimization.ts","webpack://minecraft-web-client/./renderer/playground/scenes/allEntities.ts","webpack://minecraft-web-client/./renderer/playground/scenes/geometryExport.ts","webpack://minecraft-web-client/./renderer/playground/playground.ts"],"sourcesContent":["import { Vec3 } from 'vec3'\nimport * as THREE from 'three'\nimport '../../src/getCollisionShapes'\nimport { IndexedData } from 'minecraft-data'\nimport BlockLoader from 'prismarine-block'\nimport ChunkLoader from 'prismarine-chunk'\nimport WorldLoader from 'prismarine-world'\nimport { proxy } from 'valtio'\n\n//@ts-expect-error\nimport { OrbitControls } from 'three/addons/controls/OrbitControls.js'\n// eslint-disable-next-line import/no-named-as-default\nimport GUI from 'lil-gui'\nimport _ from 'lodash'\nimport supportedVersions from '../../src/supportedVersions.mjs'\nimport { toMajorVersion } from '../../src/utils'\nimport { BlockNames } from '../../src/mcDataTypes'\nimport { defaultWorldRendererConfig, WorldRendererConfig } from '../viewer/lib/worldrendererCommon'\nimport { WorldDataEmitter } from '../viewer/lib/worldDataEmitter'\nimport { getInitialPlayerState } from '../viewer/lib/basePlayerState'\nimport { appGraphicBackends } from '../../src/appViewerLoad'\nimport { getSyncWorld } from './shared'\n\nwindow.THREE = THREE\n\n// Scene configuration interface\nexport interface PlaygroundSceneConfig {\n  version?: string\n  viewDistance?: number\n  targetPos?: Vec3\n  enableCameraControls?: boolean\n  enableCameraOrbitControl?: boolean\n  worldConfig?: WorldRendererConfig\n  continuousRender?: boolean\n}\n\nconst includedVersions = globalThis.includedVersions ?? supportedVersions\n\nexport class BasePlaygroundScene {\n  // Rendering state\n  continuousRender = false\n  stopRender = false\n  windowHidden = false\n\n  // Scene configuration\n  viewDistance = 0\n  targetPos = new Vec3(2, 90, 2)\n  version: string = new URLSearchParams(window.location.search).get('version') || includedVersions.at(-1)!\n\n  // World data\n  Chunk: typeof import('prismarine-chunk/types/index').PCChunk\n  Block: typeof import('prismarine-block').Block\n  world: ReturnType<typeof getSyncWorld>\n\n  // GUI\n  gui = new GUI()\n  params = {} as Record<string, any>\n  paramOptions = {} as Partial<Record<keyof typeof this.params, {\n    hide?: boolean\n    options?: string[]\n    min?: number\n    max?: number\n    reloadOnChange?: boolean\n  }>>\n  onParamUpdate = {} as Record<string, () => void>\n  alwaysIgnoreQs = [] as string[]\n  skipUpdateQs = false\n\n  // Camera controls - own camera synced to backend\n  enableCameraControls = true\n  enableCameraOrbitControl = true\n  controls: OrbitControls | undefined\n  camera: THREE.PerspectiveCamera\n\n  // World data emitter (from appViewer)\n  worldView: WorldDataEmitter | undefined\n\n  // Debug FPS tracking\n  private debugFpsElement: HTMLElement | undefined\n  private frameCount = 0\n  private lastSecondTime = performance.now()\n  private frameTimes: number[] = []\n  private currentFps = 0\n  private maxFrameDelay = 0\n\n  // Getter for worldRenderer - accesses via window.world for advanced scene features\n  // This allows derived scenes to access worldRenderer when needed without storing it\n  get worldRenderer () {\n    return window.world\n  }\n\n  // World config - syncs with appViewer.inWorldRenderingConfig\n  get worldConfig () {\n    return appViewer.inWorldRenderingConfig\n  }\n  set worldConfig (value) {\n    // Merge the new values into appViewer's config to maintain reactivity\n    Object.assign(appViewer.inWorldRenderingConfig, value)\n  }\n\n  constructor (config: PlaygroundSceneConfig = {}) {\n    // Apply config\n    if (config.version) this.version = config.version\n\n    // Ensure version is always set (fallback to latest supported version)\n    if (!this.version) {\n      throw new Error('Minecraft version is not set')\n    }\n\n    if (config.viewDistance !== undefined) this.viewDistance = config.viewDistance\n    if (config.targetPos) this.targetPos = config.targetPos\n    if (config.enableCameraControls !== undefined) this.enableCameraControls = config.enableCameraControls\n    if (config.enableCameraOrbitControl !== undefined) this.enableCameraOrbitControl = config.enableCameraOrbitControl\n    if (config.worldConfig) {\n      // Merge config into appViewer's config to maintain reactivity\n      Object.assign(appViewer.inWorldRenderingConfig, config.worldConfig)\n    }\n    appViewer.inWorldRenderingConfig.showHand = false\n    appViewer.inWorldRenderingConfig.isPlayground = true\n    appViewer.inWorldRenderingConfig.instantCameraUpdate = this.enableCameraOrbitControl\n    appViewer.config.statsVisible = 2\n    if (config.continuousRender !== undefined) this.continuousRender = config.continuousRender\n\n    void this.initData().then(() => {\n      this.addKeyboardShortcuts()\n    })\n  }\n\n  onParamsUpdate (paramName: string, object: any) {}\n\n  updateQs (paramName: string, valueSet: any) {\n    if (this.skipUpdateQs) return\n    const newQs = new URLSearchParams(window.location.search)\n    for (const [key, value] of Object.entries({ [paramName]: valueSet })) {\n      if (typeof value === 'function' || this.params.skipQs?.includes(key) || this.alwaysIgnoreQs.includes(key)) continue\n      if (value) {\n        newQs.set(key, value)\n      } else {\n        newQs.delete(key)\n      }\n    }\n    window.history.replaceState({}, '', `${window.location.pathname}?${newQs.toString()}`)\n  }\n\n  renderFinish () {\n    this.requestRender()\n  }\n\n  initGui () {\n    const qs = new URLSearchParams(window.location.search)\n    for (const key of Object.keys(this.params)) {\n      const value = qs.get(key)\n      if (!value) continue\n      const parsed = /^-?\\d+$/.test(value) ? Number(value) : value === 'true' ? true : value === 'false' ? false : value\n      this.params[key] = parsed\n    }\n\n    for (const param of Object.keys(this.params)) {\n      const option = this.paramOptions[param]\n      if (option?.hide) continue\n      this.gui.add(this.params, param, option?.options ?? option?.min, option?.max)\n    }\n    if (window.innerHeight < 700) {\n      this.gui.open(false)\n    } else {\n      setTimeout(() => {\n        this.gui.domElement.classList.remove('transition')\n      }, 500)\n    }\n\n    this.gui.onChange(({ property, object }) => {\n      if (object === this.params) {\n        this.onParamUpdate[property]?.()\n        this.onParamsUpdate(property, object)\n        const value = this.params[property]\n        if (this.paramOptions[property]?.reloadOnChange && (typeof value === 'boolean' || this.paramOptions[property].options)) {\n          setTimeout(() => {\n            window.location.reload()\n          })\n        }\n        this.updateQs(property, value)\n      } else {\n        this.onParamsUpdate(property, object)\n      }\n    })\n  }\n\n  // Overridable methods\n  setupWorld () { }\n  sceneReset () {}\n\n  // eslint-disable-next-line max-params\n  addWorldBlock (xOffset: number, yOffset: number, zOffset: number, blockName: BlockNames, properties?: Record<string, any>) {\n    if (xOffset > 16 || yOffset > 16 || zOffset > 16) throw new Error('Offset too big')\n    const block =\n      properties ?\n        this.Block.fromProperties(loadedData.blocksByName[blockName].id, properties ?? {}, 0) :\n        this.Block.fromStateId(loadedData.blocksByName[blockName].defaultState, 0)\n    this.world.setBlock(this.targetPos.offset(xOffset, yOffset, zOffset), block)\n  }\n\n  // Sync our camera state to the graphics backend\n  // Extract rotation from OrbitControls spherical coordinates to avoid flip issues\n  protected syncCameraToBackend (onlyRotation = false) {\n    if (!appViewer.backend || !this.camera) return\n\n    // Extract rotation from camera's quaternion to avoid gimbal lock issues\n    // Get forward direction vector to extract yaw/pitch properly\n    const forward = new THREE.Vector3(0, 0, -1)\n    forward.applyQuaternion(this.camera.quaternion)\n\n    // Calculate yaw and pitch from forward vector\n    // Yaw: rotation around Y axis (horizontal)\n    const yaw = Math.atan2(-forward.x, -forward.z)\n    // Pitch: angle from horizontal plane (vertical)\n    const pitch = Math.asin(forward.y)\n\n    if (onlyRotation) {\n      appViewer.backend.updateCamera(null, yaw, pitch)\n      return\n    }\n\n    const pos = new Vec3(this.camera.position.x, this.camera.position.y, this.camera.position.z)\n    appViewer.backend.updateCamera(pos, yaw, pitch)\n  }\n\n  resetCamera () {\n    if (!this.camera) return\n    const { targetPos } = this\n    this.controls?.target.set(targetPos.x + 0.5, targetPos.y + 0.5, targetPos.z + 0.5)\n\n    const cameraPos = targetPos.offset(2, 2, 2)\n    this.camera.position.set(cameraPos.x + 0.5, cameraPos.y + 0.5, cameraPos.z + 0.5)\n    this.camera.lookAt(targetPos.x + 0.5, targetPos.y + 0.5, targetPos.z + 0.5)\n    this.controls?.update()\n    // Sync after reset - this uses quaternion extraction which avoids flip issues\n    this.syncCameraToBackend()\n  }\n\n  async initData () {\n    await window._LOAD_MC_DATA()\n    const mcData: IndexedData = require('minecraft-data')(this.version)\n    window.loadedData = window.mcData = mcData\n\n    this.Chunk = (ChunkLoader as any)(this.version)\n    this.Block = (BlockLoader as any)(this.version)\n\n    const world = getSyncWorld(this.version)\n    world.setBlockStateId(this.targetPos, 0)\n    this.world = world\n\n    this.initGui()\n\n    // Use appViewer for resource management and world rendering\n    // worldConfig is already synced with appViewer.inWorldRenderingConfig via getter/setter\n\n    // Initialize resources manager via appViewer\n    appViewer.resourcesManager.currentConfig = { version: this.version, noInventoryGui: true }\n    await appViewer.resourcesManager.loadSourceData(this.version)\n    await appViewer.resourcesManager.updateAssetsData({})\n\n    // Load backend if not already loaded\n    if (!appViewer.backend) {\n      await appViewer.loadBackend(appGraphicBackends[0])\n    }\n\n    // Start world using appViewer\n    // This creates WorldDataEmitter, GraphicsBackend, and WorldRendererThree internally\n    await appViewer.startWorld(world, this.viewDistance, proxy(getInitialPlayerState()), this.targetPos)\n\n    // Get world view from appViewer\n    this.worldView = appViewer.worldView\n\n    // Create our own camera for OrbitControls - this is separate from the internal worldRenderer camera\n    // We sync our camera state to the backend via updateCamera()\n    this.camera = new THREE.PerspectiveCamera(\n      appViewer.inWorldRenderingConfig.fov || 75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    )\n\n    // Setup world (adds blocks, etc.)\n    this.setupWorld()\n\n    // Initialize world view with target position (loads chunks after setup)\n    if (this.worldView) {\n      this.worldView.addWaitTime = 0\n      await this.worldView.init(this.targetPos)\n    }\n\n    // Setup camera controls with our own camera\n    if (this.enableCameraControls) {\n      const canvas = document.querySelector('#viewer-canvas')\n      if (canvas) {\n        const controls = this.enableCameraOrbitControl\n          ? new OrbitControls(this.camera, canvas as HTMLElement)\n          : undefined\n        this.controls = controls\n\n        this.resetCamera()\n\n        // Camera position from query string or localStorage\n        const cameraSet = this.params.camera || localStorage.camera\n        if (cameraSet) {\n          const [x, y, z, rx, ry] = cameraSet.split(',').map(Number)\n          this.camera.position.set(x, y, z)\n          this.camera.rotation.set(rx, ry, 0, 'ZYX')\n          this.controls?.update()\n          // this.syncCameraToBackend()\n        }\n\n        const throttledCamQsUpdate = _.throttle(() => {\n          if (!this.camera) return\n          localStorage.camera = [\n            this.camera.position.x.toFixed(2),\n            this.camera.position.y.toFixed(2),\n            this.camera.position.z.toFixed(2),\n            this.camera.rotation.x.toFixed(2),\n            this.camera.rotation.y.toFixed(2),\n          ].join(',')\n        }, 200)\n\n        if (this.controls) {\n          const throttledCameraSync = _.throttle(() => {\n            // this.syncCameraToBackend(true) // Only sync rotation when OrbitControls changes\n          }, 16) // ~60fps sync rate\n\n          this.controls.addEventListener('change', () => {\n            throttledCameraSync()\n            throttledCamQsUpdate()\n            this.requestRender()\n          })\n        } else {\n          setInterval(() => {\n            throttledCamQsUpdate()\n          }, 200)\n        }\n      }\n    }\n\n    // Manual camera controls (if orbit controls disabled)\n    if (!this.enableCameraOrbitControl && this.camera) {\n      let mouseMoveCounter = 0\n      const mouseMove = (e: PointerEvent) => {\n        if ((e.target as HTMLElement).closest('.lil-gui')) return\n        if (e.buttons === 1 || e.pointerType === 'touch') {\n          mouseMoveCounter++\n          this.camera.rotation.x -= e.movementY / 100\n          this.camera.rotation.y -= e.movementX / 100\n          if (this.camera.rotation.x < -Math.PI / 2) this.camera.rotation.x = -Math.PI / 2\n          if (this.camera.rotation.x > Math.PI / 2) this.camera.rotation.x = Math.PI / 2\n          this.syncCameraToBackend(true)\n        }\n        if (e.buttons === 2) {\n          this.camera.position.set(0, 0, 0)\n          this.syncCameraToBackend()\n        }\n      }\n      setInterval(() => {\n        mouseMoveCounter = 0\n      }, 1000)\n      window.addEventListener('pointermove', mouseMove)\n    }\n\n    // Setup resize handler\n    this.onResize()\n    window.addEventListener('resize', () => this.onResize())\n\n    // Setup debug FPS GUI\n    this.setupDebugFpsGui()\n\n    // Wait for chunks and finish setup\n    // Access worldRenderer via window.world for this one-time operation\n    // const worldRenderer = window.world\n    // if (worldRenderer) {\n    //   void worldRenderer.waitForChunksToRender().then(async () => {\n    //     this.renderFinish()\n    //   })\n\n    //   // Listen for world updates to trigger on-demand renders\n    //   worldRenderer.renderUpdateEmitter.addListener('update', () => {\n    //     this.requestRender()\n    //   })\n    // }\n\n    // // Start render loop if continuous, otherwise use on-demand rendering\n    // if (this.continuousRender) {\n    //   this.loop()\n    // }\n    this.renderFinish()\n    this.mainDebugLoop()\n  }\n\n  mainDebugLoop () {\n    requestAnimationFrame(() => this.mainDebugLoop())\n    this.trackFrame()\n  }\n\n  loop () {\n    if (this.continuousRender && !this.windowHidden) {\n      this.requestRender()\n      requestAnimationFrame(() => this.loop())\n    }\n  }\n\n  // Request a render from the backend (on-demand rendering)\n  // The DocumentRenderer loop handles actual rendering continuously\n  // Camera sync happens via syncCameraToBackend() which updates the internal camera\n  requestRender () {\n    // No-op: rendering is handled by DocumentRenderer's continuous loop\n    // This method exists for API compatibility\n  }\n\n  private setupDebugFpsGui () {\n    // Create simple DOM element for debug FPS display in bottom left corner\n    this.debugFpsElement = document.createElement('div')\n    this.debugFpsElement.style.position = 'fixed'\n    this.debugFpsElement.style.bottom = '0'\n    this.debugFpsElement.style.left = '0'\n    this.debugFpsElement.style.zIndex = '1000'\n    this.debugFpsElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'\n    this.debugFpsElement.style.color = '#fff'\n    this.debugFpsElement.style.padding = '4px 6px'\n    this.debugFpsElement.style.fontFamily = 'monospace'\n    this.debugFpsElement.style.fontSize = '11px'\n    this.debugFpsElement.style.lineHeight = '1.2'\n    this.debugFpsElement.style.pointerEvents = 'none'\n    this.debugFpsElement.style.userSelect = 'none'\n    this.debugFpsElement.textContent = 'FPS: 0 | Max: 0 ms'\n\n    document.body.appendChild(this.debugFpsElement)\n\n    // Update debug info every second\n    setInterval(() => {\n      this.updateDebugInfo()\n    }, 1000)\n  }\n\n  private trackFrame () {\n    const now = performance.now()\n    this.frameTimes.push(now)\n    this.frameCount++\n\n    // Calculate frame delay (time since last frame)\n    if (this.frameTimes.length > 1) {\n      const delay = now - this.frameTimes.at(-2)!\n      if (delay > this.maxFrameDelay) {\n        this.maxFrameDelay = delay\n      }\n    }\n\n    // Keep only last second of frame times\n    const oneSecondAgo = now - 1000\n    this.frameTimes = this.frameTimes.filter(time => time > oneSecondAgo)\n  }\n\n  private updateDebugInfo () {\n    if (!this.debugFpsElement) return\n\n    // Calculate FPS from number of frames in the last second\n    // frameTimes array contains timestamps from the last second after filtering\n    const fps = this.frameTimes.length\n\n    this.currentFps = fps\n\n    const isSeriousDelay = this.maxFrameDelay > 150\n    const delayText = isSeriousDelay\n      ? `<span style=\"color: #ff4444;\">${this.maxFrameDelay.toFixed(0)}ms</span>`\n      : `${this.maxFrameDelay.toFixed(0)}ms`\n\n    // Update the DOM element directly - single line format\n    this.debugFpsElement.innerHTML = `FPS: ${fps} | Max Delay: ${delayText}`\n\n    // Reset for next second\n    this.lastSecondTime = performance.now()\n    this.maxFrameDelay = 0\n    this.frameCount = 0\n  }\n\n  // Legacy render method for compatibility\n  render (fromLoop = false) {\n    this.requestRender()\n  }\n\n  addKeyboardShortcuts () {\n    document.addEventListener('keydown', (e) => {\n      if (!e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey) {\n        if (e.code === 'KeyR') {\n          this.controls?.reset()\n          this.resetCamera()\n        }\n        if (e.code === 'KeyE') { // refresh block (main)\n          this.worldView!.setBlockStateId(this.targetPos, this.world.getBlockStateId(this.targetPos))\n        }\n        if (e.code === 'KeyF') { // reload all chunks\n          this.sceneReset()\n          this.worldView!.unloadAllChunks()\n          void this.worldView!.init(this.targetPos)\n        }\n      }\n    })\n    document.addEventListener('visibilitychange', () => {\n      this.windowHidden = document.visibilityState === 'hidden'\n    })\n    document.addEventListener('blur', () => {\n      this.windowHidden = true\n    })\n    document.addEventListener('focus', () => {\n      this.windowHidden = false\n    })\n\n    const pressedKeys = new Set<string>()\n    const updateKeys = () => {\n      if (pressedKeys.has('ControlLeft') || pressedKeys.has('MetaLeft')) {\n        return\n      }\n      if (!this.camera) return\n\n      const direction = new THREE.Vector3(0, 0, 0)\n      if (pressedKeys.has('KeyW')) {\n        direction.z = -0.5\n      }\n      if (pressedKeys.has('KeyS')) {\n        direction.z += 0.5\n      }\n      if (pressedKeys.has('KeyA')) {\n        direction.x -= 0.5\n      }\n      if (pressedKeys.has('KeyD')) {\n        direction.x += 0.5\n      }\n\n      if (pressedKeys.has('ShiftLeft')) {\n        this.camera.position.y -= 0.5\n      }\n      if (pressedKeys.has('Space')) {\n        this.camera.position.y += 0.5\n      }\n      direction.applyQuaternion(this.camera.quaternion)\n      direction.y = 0\n\n      if (pressedKeys.has('ShiftLeft')) {\n        direction.y *= 2\n        direction.x *= 2\n        direction.z *= 2\n      }\n      this.camera.position.add(direction.normalize())\n      this.controls?.update()\n      this.syncCameraToBackend()\n      this.requestRender()\n    }\n    setInterval(updateKeys, 1000 / 20)\n\n    const keys = (e: KeyboardEvent) => {\n      const { code } = e\n      const pressed = e.type === 'keydown'\n      if (pressed) {\n        pressedKeys.add(code)\n      } else {\n        pressedKeys.delete(code)\n      }\n    }\n\n    window.addEventListener('keydown', keys)\n    window.addEventListener('keyup', keys)\n    window.addEventListener('blur', () => {\n      for (const key of pressedKeys) {\n        keys(new KeyboardEvent('keyup', { code: key }))\n      }\n    })\n  }\n\n  onResize () {\n    this.requestRender()\n  }\n}\n","// eslint-disable-next-line import/no-named-as-default\nimport GUI, { Controller } from 'lil-gui'\nimport * as THREE from 'three'\nimport JSZip from 'jszip'\nimport { BasePlaygroundScene } from '../baseScene'\nimport { TWEEN_DURATION } from '../../viewer/three/entities'\nimport { EntityMesh } from '../../viewer/three/entity/EntityMesh'\nimport supportedVersions from '../../../src/supportedVersions.mjs'\n\nconst includedVersions = globalThis.includedVersions ?? supportedVersions\n\nclass MainScene extends BasePlaygroundScene {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor (...args) {\n    super(...args)\n  }\n\n  override initGui (): void {\n    // initial values\n    this.params = {\n      version: includedVersions.at(-1),\n      skipQs: '',\n      block: '',\n      metadata: 0,\n      supportBlock: false,\n      entity: '',\n      removeEntity () {\n        this.entity = ''\n      },\n      entityRotate: false,\n      camera: '',\n      playSound () { },\n      blockIsomorphicRenderBundle () { },\n      modelVariant: 0\n    }\n    this.metadataGui = this.gui.add(this.params, 'metadata')\n    this.paramOptions = {\n      version: {\n        options: includedVersions,\n        hide: false\n      },\n      block: {\n        options: mcData.blocksArray.map(b => b.name).sort((a, b) => a.localeCompare(b))\n      },\n      entity: {\n        options: mcData.entitiesArray.map(b => b.name).sort((a, b) => a.localeCompare(b))\n      },\n      camera: {\n        hide: true,\n      }\n    }\n    super.initGui()\n  }\n\n  blockProps = {}\n  metadataFolder: GUI | undefined\n  metadataGui: Controller\n\n  override onParamUpdate = {\n    version () {\n      // if (initialUpdate) return\n      // viewer.world.texturesVersion = params.version\n      // viewer.world.updateTexturesData()\n      // todo warning\n    },\n    block: () => {\n      this.blockProps = {}\n      this.metadataFolder?.destroy()\n      const block = mcData.blocksByName[this.params.block]\n      if (!block) return\n      console.log('block', block.name)\n      const props = new this.Block(block.id, 0, 0).getProperties()\n      const { states } = mcData.blocksByStateId[this.getBlock()?.minStateId] ?? {}\n      this.metadataFolder = this.gui.addFolder('metadata')\n      if (states) {\n        for (const state of states) {\n          let defaultValue: string | number | boolean\n          if (state.values) { // int, enum\n            defaultValue = state.values[0]\n          } else {\n            switch (state.type) {\n              case 'bool':\n                defaultValue = false\n                break\n              case 'int':\n                defaultValue = 0\n                break\n              case 'direction':\n                defaultValue = 'north'\n                break\n\n              default:\n                continue\n            }\n          }\n          this.blockProps[state.name] = defaultValue\n          if (state.values) {\n            this.metadataFolder.add(this.blockProps, state.name, state.values)\n          } else {\n            this.metadataFolder.add(this.blockProps, state.name)\n          }\n        }\n      } else {\n        for (const [name, value] of Object.entries(props)) {\n          this.blockProps[name] = value\n          this.metadataFolder.add(this.blockProps, name)\n        }\n      }\n      console.log('props', this.blockProps)\n      this.metadataFolder.open()\n    },\n    entity: () => {\n      this.continuousRender = this.params.entity === 'player'\n      this.entityUpdateShared()\n      if (!this.params.entity) return\n      if (this.params.entity === 'player') {\n        this.worldRenderer.entities.updatePlayerSkin('id', this.worldRenderer.entities.entities.id.username, undefined, true, true)\n        this.worldRenderer.entities.playAnimation('id', 'running')\n      }\n      // let prev = false\n      // setInterval(() => {\n      //   viewer.entities.playAnimation('id', prev ? 'running' : 'idle')\n      //   prev = !prev\n      // }, 1000)\n\n      EntityMesh.getStaticData(this.params.entity)\n      // entityRotationFolder.destroy()\n      // entityRotationFolder = gui.addFolder('entity metadata')\n      // entityRotationFolder.add(params, 'entityRotate')\n      // entityRotationFolder.open()\n    },\n    supportBlock: () => {\n      this.worldView!.setBlockStateId(this.targetPos.offset(0, -1, 0), this.params.supportBlock ? 1 : 0)\n    },\n    modelVariant: () => {\n      this.worldRenderer.worldRendererConfig.debugModelVariant = this.params.modelVariant === 0 ? undefined : [this.params.modelVariant]\n    }\n  }\n\n  entityUpdateShared () {\n    this.worldRenderer.entities.clear()\n    if (!this.params.entity) return\n    this.worldView!.emit('entity', {\n      id: 'id', name: this.params.entity, pos: this.targetPos.offset(0.5, 1, 0.5), width: 1, height: 1, username: localStorage.testUsername, yaw: Math.PI, pitch: 0\n    })\n    const enableSkeletonDebug = (obj) => {\n      const { children, isSkeletonHelper } = obj\n      if (!Array.isArray(children)) return\n      if (isSkeletonHelper) {\n        obj.visible = true\n        return\n      }\n      for (const child of children) {\n        if (typeof child === 'object') enableSkeletonDebug(child)\n      }\n    }\n    enableSkeletonDebug(this.worldRenderer.entities.entities['id'])\n    setTimeout(() => {\n      this.render()\n    }, TWEEN_DURATION)\n  }\n\n  getBlock () {\n    return mcData.blocksByName[this.params.block || 'air']\n  }\n\n  // applyChanges (metadataUpdate = false, skipQs = false) {\n  override onParamsUpdate (paramName: string, object: any) {\n    const metadataUpdate = paramName === 'metadata'\n\n    const blockId = this.getBlock()?.id\n    let block: import('prismarine-block').Block\n    if (metadataUpdate) {\n      block = new this.Block(blockId, 0, this.params.metadata)\n      Object.assign(this.blockProps, block.getProperties())\n      for (const _child of this.metadataFolder!.children) {\n        const child = _child as import('lil-gui').Controller\n        child.updateDisplay()\n      }\n    } else {\n      try {\n        block = this.Block.fromProperties(blockId ?? -1, this.blockProps, 0)\n      } catch (err) {\n        console.error(err)\n        block = this.Block.fromStateId(0, 0)\n      }\n    }\n\n    this.worldView!.setBlockStateId(this.targetPos, block.stateId ?? 0)\n    console.log('up stateId', block.stateId)\n    this.params.metadata = block.metadata\n    this.metadataGui.updateDisplay()\n  }\n\n  override renderFinish () {\n    for (const update of Object.values(this.onParamUpdate)) {\n      // update(true)\n      update()\n    }\n    this.onParamsUpdate('', {})\n    this.gui.openAnimated()\n  }\n\n  blockIsomorphicRenderBundle () {\n    const { renderer } = this.worldRenderer\n\n    const canvas = renderer.domElement\n    const onlyCurrent = !confirm('Ok - render all blocks, Cancel - render only current one')\n    const sizeRaw = prompt('Size', '512')\n    if (!sizeRaw) return\n    const size = parseInt(sizeRaw, 10)\n    // const size = 512\n\n    canvas.width = size\n    canvas.height = size\n    renderer.setSize(size, size)\n\n    // Temporarily replace PerspectiveCamera with OrthographicCamera for block rendering\n    this.worldRenderer.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 10) as any\n    this.worldRenderer.scene.background = null\n\n    const rad = THREE.MathUtils.degToRad(-120)\n    this.worldRenderer.directionalLight.position.set(\n      Math.cos(rad),\n      Math.sin(rad),\n      0.2\n    ).normalize()\n    this.worldRenderer.directionalLight.intensity = 1\n\n    const cameraPos = this.targetPos.offset(2, 2, 2)\n    const pitch = THREE.MathUtils.degToRad(-30)\n    const yaw = THREE.MathUtils.degToRad(45)\n    this.worldRenderer.camera.rotation.set(pitch, yaw, 0, 'ZYX')\n    // this.worldRenderer!.camera.lookAt(center.x + 0.5, center.y + 0.5, center.z + 0.5)\n    this.worldRenderer.camera.position.set(cameraPos.x + 1, cameraPos.y + 0.5, cameraPos.z + 1)\n\n    const allBlocks = mcData.blocksArray.map(b => b.name)\n    // const allBlocks = ['stone', 'warped_slab']\n\n    let blockCount = 1\n    let blockName = allBlocks[0]\n\n    const updateBlock = () => {\n      // viewer.setBlockStateId(targetPos, mcData.blocksByName[blockName].minStateId)\n      this.params.block = blockName\n      // todo cleanup (introduce getDefaultState)\n      // TODO\n      // onUpdate.block()\n      // applyChanges(false, true)\n    }\n    void this.worldRenderer.waitForChunksToRender().then(async () => {\n      // wait for next macro task\n      await new Promise(resolve => {\n        setTimeout(resolve, 0)\n      })\n      if (onlyCurrent) {\n        this.render()\n        onWorldUpdate()\n      } else {\n        // will be called on every render update\n        this.worldRenderer.renderUpdateEmitter.addListener('update', onWorldUpdate)\n        updateBlock()\n      }\n    })\n\n    const zip = new JSZip()\n    zip.file('description.txt', 'Generated with mcraft.fun/playground')\n\n    const end = async () => {\n      // download zip file\n\n      const a = document.createElement('a')\n      const blob = await zip.generateAsync({ type: 'blob' })\n      const dataUrlZip = URL.createObjectURL(blob)\n      a.href = dataUrlZip\n      a.download = 'blocks_render.zip'\n      a.click()\n      URL.revokeObjectURL(dataUrlZip)\n      console.log('end')\n\n      this.worldRenderer.renderUpdateEmitter.removeListener('update', onWorldUpdate)\n    }\n\n    async function onWorldUpdate () {\n      // await new Promise(resolve => {\n      //   setTimeout(resolve, 50)\n      // })\n      const dataUrl = canvas.toDataURL('image/png')\n\n      zip.file(`${blockName}.png`, dataUrl.split(',')[1], { base64: true })\n\n      if (onlyCurrent) {\n        end()\n      } else {\n        nextBlock()\n      }\n    }\n    const nextBlock = async () => {\n      blockName = allBlocks[blockCount++]\n      console.log(allBlocks.length, '/', blockCount, blockName)\n      if (blockCount % 5 === 0) {\n        await new Promise(resolve => {\n          setTimeout(resolve, 100)\n        })\n      }\n      if (blockName) {\n        updateBlock()\n      } else {\n        end()\n      }\n    }\n  }\n}\n\nexport default MainScene\n","import { renderToDom } from '@zardoy/react-util'\nimport { useEffect, useState } from 'react'\nimport { proxy, useSnapshot } from 'valtio'\nimport { LeftTouchArea, RightTouchArea, useInterfaceState } from '@dimaka/interface'\nimport { css } from '@emotion/css'\nimport { Vec3 } from 'vec3'\nimport useLongPress from '../../src/react/useLongPress'\nimport { isMobile } from '../viewer/lib/simpleUtils'\n\nexport const playgroundGlobalUiState = proxy({\n  scenes: [] as string[],\n  selected: '',\n  selectorOpened: false,\n  actions: {} as Record<string, () => void>,\n})\n\nrenderToDom(<Playground />, {\n  strictMode: false,\n  selector: '#react-root',\n})\n\nfunction Playground () {\n  useEffect(() => {\n    const style = document.createElement('style')\n    style.innerHTML = /* css */ `\n      .lil-gui {\n        top: 60px !important;\n        right: 0 !important;\n      }\n    `\n    document.body.appendChild(style)\n    return () => {\n      style.remove()\n    }\n  }, [])\n\n  return <div style={{\n    fontFamily: 'monospace',\n    color: 'white',\n  }}>\n    <Controls />\n    <SceneSelector />\n    <ActionsSelector />\n  </div>\n}\n\nfunction SceneSelector () {\n  const mobile = isMobile()\n  const { scenes, selected } = useSnapshot(playgroundGlobalUiState)\n  const [hidden, setHidden] = useState(false)\n  const longPressEvents = useLongPress(() => {\n    playgroundGlobalUiState.selectorOpened = true\n  }, () => { })\n\n  if (hidden) return null\n\n  return <div\n    style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      display: 'flex',\n      alignItems: 'flex-start',\n    }} {...longPressEvents}>\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\n      {scenes.map(scene => <div\n        key={scene}\n        style={{\n          padding: mobile ? '5px' : '2px 5px',\n          cursor: 'pointer',\n          userSelect: 'none',\n          background: scene === selected ? 'rgba(0, 0, 0, 0.5)' : 'rgba(0, 0, 0, 0.6)',\n          fontWeight: scene === selected ? 'bold' : 'normal',\n        }}\n        onClick={() => {\n          const qs = new URLSearchParams(window.location.search)\n          qs.set('scene', scene)\n          location.search = qs.toString()\n        }}\n      >{scene}</div>)}\n    </div>\n    <div\n      style={{\n        padding: mobile ? '5px' : '2px 5px',\n        cursor: 'pointer',\n        userSelect: 'none',\n        background: 'rgba(0, 0, 0, 0.6)',\n        fontSize: '14px',\n        lineHeight: '1',\n      }}\n      onClick={() => setHidden(true)}\n    >Ã—</div>\n  </div>\n}\n\nconst ActionsSelector = () => {\n  const { actions, selectorOpened } = useSnapshot(playgroundGlobalUiState)\n\n  if (!selectorOpened) return null\n  return <div style={{\n    position: 'fixed',\n    inset: 0,\n    background: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 5,\n    fontSize: 24,\n  }}>{Object.entries({\n      ...actions,\n      'Close' () {\n        playgroundGlobalUiState.selectorOpened = false\n      }\n    }).map(([name, action]) => <div\n      key={name}\n      style={{\n        padding: '2px 5px',\n        cursor: 'pointer',\n        userSelect: 'none',\n        background: 'rgba(0, 0, 0, 0.5)',\n      }}\n      onClick={() => {\n        action()\n        playgroundGlobalUiState.selectorOpened = false\n      }}\n    >{name}</div>)}</div>\n}\n\nconst Controls = () => {\n  // todo setting\n  const usingTouch = navigator.maxTouchPoints > 0\n\n  useEffect(() => {\n    window.addEventListener('touchstart', (e) => {\n      e.preventDefault()\n    })\n\n    const pressedKeys = new Set<string>()\n    useInterfaceState.setState({\n      isFlying: false,\n      uiCustomization: {\n        touchButtonSize: 40,\n      },\n      updateCoord ([coord, state]) {\n        const vec3 = new Vec3(0, 0, 0)\n        vec3[coord] = state\n        let key: string | undefined\n        if (vec3.z < 0) key = 'KeyW'\n        if (vec3.z > 0) key = 'KeyS'\n        if (vec3.y > 0) key = 'Space'\n        if (vec3.y < 0) key = 'ShiftLeft'\n        if (vec3.x < 0) key = 'KeyA'\n        if (vec3.x > 0) key = 'KeyD'\n        if (key) {\n          if (!pressedKeys.has(key)) {\n            pressedKeys.add(key)\n            window.dispatchEvent(new KeyboardEvent('keydown', { code: key }))\n          }\n        }\n        for (const k of pressedKeys) {\n          if (k !== key) {\n            window.dispatchEvent(new KeyboardEvent('keyup', { code: k }))\n            pressedKeys.delete(k)\n          }\n        }\n      }\n    })\n  }, [])\n\n  if (!usingTouch) return null\n  return (\n    <div\n      style={{ zIndex: 8 }}\n      className={css`\n        position: fixed;\n        inset: 0;\n        height: 100%;\n        display: flex;\n        width: 100%;\n        justify-content: space-between;\n        align-items: flex-end;\n        pointer-events: none;\n        touch-action: none;\n        & > div {\n            pointer-events: auto;\n        }\n    `}\n    >\n      <LeftTouchArea />\n      <div />\n      <RightTouchArea />\n    </div>\n  )\n}\n","import { BasePlaygroundScene } from '../baseScene'\n\nexport default class RailsCobwebScene extends BasePlaygroundScene {\n  setupWorld () {\n    this.addWorldBlock(0, 0, 0, 'cobweb')\n    this.addWorldBlock(0, -1, 0, 'cobweb')\n    this.addWorldBlock(1, -1, 0, 'cobweb')\n    this.addWorldBlock(1, 0, 0, 'cobweb')\n\n    this.addWorldBlock(0, 0, 1, 'powered_rail', { shape: 'north_south', waterlogged: false })\n    this.addWorldBlock(0, 0, 2, 'powered_rail', { shape: 'ascending_south', waterlogged: false })\n    this.addWorldBlock(0, 1, 3, 'powered_rail', { shape: 'north_south', waterlogged: false })\n  }\n}\n","import { BasePlaygroundScene } from '../baseScene'\n\nexport default class RailsCobwebScene extends BasePlaygroundScene {\n  viewDistance = 5\n  continuousRender = true\n\n  override initGui (): void {\n    this.params = {\n      squareSize: 50\n    }\n\n    super.initGui()\n  }\n\n  setupWorld () {\n    const squareSize = this.params.squareSize ?? 30\n    const maxSquareSize = this.viewDistance * 16 * 2\n    if (squareSize > maxSquareSize) throw new Error(`Square size too big, max is ${maxSquareSize}`)\n    // const fullBlocks = loadedData.blocksArray.map(x => x.name)\n    const fullBlocks = loadedData.blocksArray.filter(block => {\n      const b = this.Block.fromStateId(block.defaultState, 0)\n      if (b.shapes?.length !== 1) return false\n      const shape = b.shapes[0]\n      return shape[0] === 0 && shape[1] === 0 && shape[2] === 0 && shape[3] === 1 && shape[4] === 1 && shape[5] === 1\n    })\n    for (let x = -squareSize; x <= squareSize; x++) {\n      for (let z = -squareSize; z <= squareSize; z++) {\n        const i = Math.abs(x + z) * squareSize\n        worldView!.world.setBlock(this.targetPos.offset(x, 0, z), this.Block.fromStateId(fullBlocks[i % fullBlocks.length].defaultState, 0))\n      }\n    }\n  }\n}\n","//@ts-nocheck\nimport * as THREE from 'three'\nimport { Vec3 } from 'vec3'\nimport { BasePlaygroundScene } from '../baseScene'\nimport { WorldRendererThree } from '../../viewer/three/worldrendererThree'\n\nexport default class extends BasePlaygroundScene {\n  continuousRender = true\n\n  override setupWorld (): void {\n    viewer.world.mesherConfig.enableLighting = true\n    viewer.world.mesherConfig.skyLight = 0\n    this.addWorldBlock(0, 0, 0, 'stone')\n    this.addWorldBlock(0, 0, 1, 'stone')\n    this.addWorldBlock(1, 0, 0, 'stone')\n    this.addWorldBlock(1, 0, 1, 'stone')\n    // chess like\n    worldView?.world.setBlockLight(this.targetPos.offset(0, 1, 0), 15)\n    worldView?.world.setBlockLight(this.targetPos.offset(0, 1, 1), 0)\n    worldView?.world.setBlockLight(this.targetPos.offset(1, 1, 0), 0)\n    worldView?.world.setBlockLight(this.targetPos.offset(1, 1, 1), 15)\n  }\n\n  override renderFinish (): void {\n    viewer.scene.background = new THREE.Color(0x00_00_00)\n    // starfield and test entities\n    ;(viewer.world as WorldRendererThree).starField.enabled = true\n    ;(viewer.world as WorldRendererThree).starField.addToScene()\n    viewer.entities.update({\n      id: 0,\n      name: 'player',\n      pos: this.targetPos.clone()\n    } as any, {})\n    viewer.entities.update({\n      id: 1,\n      name: 'creeper',\n      pos: this.targetPos.offset(1, 0, 0)\n    } as any, {})\n  }\n}\n","import { BasePlaygroundScene } from '../baseScene'\n\nexport default class extends BasePlaygroundScene {\n  setupWorld () {\n    this.addWorldBlock(0, 0, 0, 'water')\n    this.addWorldBlock(0, 1, 0, 'lime_stained_glass')\n    this.addWorldBlock(0, 0, -1, 'lime_stained_glass')\n    this.addWorldBlock(0, -1, 0, 'lime_stained_glass')\n    this.addWorldBlock(0, -1, -1, 'stone')\n  }\n}\n","import { BasePlaygroundScene } from '../baseScene'\n\nexport default class RotationIssueScene extends BasePlaygroundScene {\n  setupWorld () {\n    // todo\n  }\n}\n","//@ts-nocheck\nimport * as THREE from 'three'\nimport { Vec3 } from 'vec3'\nimport { BasePlaygroundScene } from '../baseScene'\nimport { WorldRendererThree } from '../../viewer/three/worldrendererThree'\n\nexport default class extends BasePlaygroundScene {\n  continuousRender = true\n\n  override initGui (): void {\n    this.params = {\n      starfield: false,\n      entity: 'player',\n      count: 4\n    }\n  }\n\n  override renderFinish (): void {\n    if (this.params.starfield) {\n      ;(viewer.world as WorldRendererThree).scene.background = new THREE.Color(0x00_00_00)\n      ;(viewer.world as WorldRendererThree).starField.enabled = true\n      ;(viewer.world as WorldRendererThree).starField.addToScene()\n    }\n\n    for (let i = 0; i < this.params.count; i++) {\n      for (let j = 0; j < this.params.count; j++) {\n        for (let k = 0; k < this.params.count; k++) {\n          viewer.entities.update({\n            id: i * 1000 + j * 100 + k,\n            name: this.params.entity,\n            pos: this.targetPos.offset(i, j, k)\n          } as any, {})\n        }\n      }\n    }\n  }\n}\n","//@ts-nocheck\nimport { Vec3 } from 'vec3'\nimport { BasePlaygroundScene } from '../baseScene'\n\nexport default class extends BasePlaygroundScene {\n  viewDistance = 5\n  continuousRender = true\n\n  override initGui (): void {\n    this.params = {\n      testActive: false,\n      testUpdatesPerSecond: 10,\n      testInitialUpdate: false,\n      stopGeometryUpdate: false,\n      manualTest: () => {\n        this.updateBlock()\n      },\n      testNeighborUpdates: () => {\n        this.testNeighborUpdates()\n      }\n    }\n\n    super.initGui()\n  }\n\n  lastUpdatedOffset = 0\n  lastUpdatedId = 2\n  updateBlock () {\n    const x = this.lastUpdatedOffset % 16\n    const z = Math.floor(this.lastUpdatedOffset / 16)\n    const y = 90\n    worldView!.setBlockStateId(new Vec3(x, y, z), this.lastUpdatedId++)\n    this.lastUpdatedOffset++\n    if (this.lastUpdatedOffset > 16 * 16) this.lastUpdatedOffset = 0\n    if (this.lastUpdatedId > 500) this.lastUpdatedId = 1\n  }\n\n  testNeighborUpdates () {\n    viewer.world.setBlockStateId(new Vec3(15, 95, 15), 1)\n    viewer.world.setBlockStateId(new Vec3(0, 95, 15), 1)\n    viewer.world.setBlockStateId(new Vec3(15, 95, 0), 1)\n    viewer.world.setBlockStateId(new Vec3(0, 95, 0), 1)\n\n    viewer.world.setBlockStateId(new Vec3(16, 95, 15), 1)\n    viewer.world.setBlockStateId(new Vec3(-1, 95, 15), 1)\n    viewer.world.setBlockStateId(new Vec3(15, 95, -1), 1)\n    viewer.world.setBlockStateId(new Vec3(-1, 95, 0), 1)\n    setTimeout(() => {\n      viewer.world.setBlockStateId(new Vec3(16, 96, 16), 1)\n      viewer.world.setBlockStateId(new Vec3(-1, 96, 16), 1)\n      viewer.world.setBlockStateId(new Vec3(16, 96, -1), 1)\n      viewer.world.setBlockStateId(new Vec3(-1, 96, -1), 1)\n    }, 3000)\n  }\n\n  setupTimer () {\n    // this.stopRender = true\n\n    let lastTime = 0\n    const tick = () => {\n      viewer.world.debugStopGeometryUpdate = this.params.stopGeometryUpdate\n      const updateEach = 1000 / this.params.testUpdatesPerSecond\n      requestAnimationFrame(tick)\n      if (!this.params.testActive) return\n      const updateCount = Math.floor(performance.now() - lastTime) / updateEach\n      for (let i = 0; i < updateCount; i++) {\n        this.updateBlock()\n      }\n      lastTime = performance.now()\n    }\n\n    requestAnimationFrame(tick)\n\n    // const limit = 1000\n    // const limit = 100\n    // const limit = 1\n    // const updatedChunks = new Set<string>()\n    // const updatedBlocks = new Set<string>()\n    // let lastSecond = 0\n    // setInterval(() => {\n    //   const second = Math.floor(performance.now() / 1000)\n    //   if (lastSecond !== second) {\n    //     lastSecond = second\n    //     updatedChunks.clear()\n    //     updatedBlocks.clear()\n    //   }\n    //   const isEven = second % 2 === 0\n    //   if (updatedBlocks.size > limit) {\n    //     return\n    //   }\n    //   const changeBlock = (x, z) => {\n    //     const chunkKey = `${Math.floor(x / 16)},${Math.floor(z / 16)}`\n    //     const key = `${x},${z}`\n    //     if (updatedBlocks.has(chunkKey)) return\n\n    //     updatedChunks.add(chunkKey)\n    //     worldView!.world.setBlock(this.targetPos.offset(x, 0, z), this.Block.fromStateId(isEven ? 2 : 3, 0))\n    //     updatedBlocks.add(key)\n    //   }\n    //   const { squareSize } = this.params\n    //   const xStart = -squareSize\n    //   const zStart = -squareSize\n    //   const xEnd = squareSize\n    //   const zEnd = squareSize\n    //   for (let x = xStart; x <= xEnd; x += 16) {\n    //     for (let z = zStart; z <= zEnd; z += 16) {\n    //       const key = `${x},${z}`\n    //       if (updatedChunks.has(key)) continue\n    //       changeBlock(x, z)\n    //       return\n    //     }\n    //   }\n    // for (let x = xStart; x <= xEnd; x += 16) {\n    //   for (let z = zStart; z <= zEnd; z += 16) {\n    //     const key = `${x},${z}`\n    //     if (updatedChunks.has(key)) continue\n    //     changeBlock(x, z)\n    //     return\n    //   }\n    // }\n    // }, 1)\n  }\n\n  setupWorld () {\n    this.worldConfig.showChunkBorders = true\n\n    const maxSquareRadius = this.viewDistance * 16\n    // const fullBlocks = loadedData.blocksArray.map(x => x.name)\n    const squareSize = maxSquareRadius\n    for (let x = -squareSize; x <= squareSize; x++) {\n      for (let z = -squareSize; z <= squareSize; z++) {\n        const i = Math.abs(x + z) * squareSize\n        worldView!.world.setBlock(this.targetPos.offset(x, 0, z), this.Block.fromStateId(1, 0))\n      }\n    }\n    let done = false\n    viewer.world.renderUpdateEmitter.on('update', () => {\n      if (!viewer.world.allChunksFinished || done) return\n      done = true\n      this.setupTimer()\n    })\n    setTimeout(() => {\n      if (this.params.testInitialUpdate) {\n        this.updateBlock()\n      }\n    })\n  }\n}\n","import { BasePlaygroundScene } from '../baseScene'\n\nexport default class extends BasePlaygroundScene {\n  expectedNumberOfFaces = 30\n  enableCameraOrbitControl = false\n\n  setupWorld () {\n    this.addWorldBlock(0, 1, 0, 'stone_slab')\n    this.addWorldBlock(0, 0, 0, 'stone')\n    this.addWorldBlock(0, -1, 0, 'stone_slab', { type: 'top', waterlogged: false })\n    this.addWorldBlock(0, -1, -1, 'stone_slab', { type: 'top', waterlogged: false })\n    this.addWorldBlock(0, -1, 1, 'stone_slab', { type: 'top', waterlogged: false })\n    this.addWorldBlock(-1, -1, 0, 'stone_slab', { type: 'top', waterlogged: false })\n    this.addWorldBlock(1, -1, 0, 'stone_slab', { type: 'top', waterlogged: false })\n  }\n}\n","import { BasePlaygroundScene } from '../baseScene'\nimport { EntityDebugFlags, EntityMesh, rendererSpecialHandled } from '../../viewer/three/entity/EntityMesh'\nimport { displayEntitiesDebugList } from '../allEntitiesDebug'\n\nexport default class AllEntities extends BasePlaygroundScene {\n  continuousRender = false\n  enableCameraControls = false\n\n  async initData () {\n    await super.initData()\n    displayEntitiesDebugList(this.version)\n  }\n}\n","import * as THREE from 'three'\nimport { BasePlaygroundScene } from '../baseScene'\nimport {\n  downloadWorldGeometry,\n  loadWorldGeometryFromUrl,\n  createMeshesFromExport,\n  loadTextureFromDataUrl,\n  type ExportedWorldGeometry\n} from '../../viewer/three/worldGeometryExport'\n\n/**\n * Scene for exporting/importing world geometry\n *\n * Usage:\n * - Load normally: builds world from blocks, can export geometry\n * - Load with ?geometryUrl=URL: loads pre-exported geometry from file (or default world-geometry.json)\n */\nexport default class extends BasePlaygroundScene {\n  params = {\n    exportGeometry: () => this.exportGeometry(),\n    exportWithTexture: () => this.exportGeometry(true),\n  }\n\n  // Loaded geometry data (when loading from URL)\n  private loadedGeometry: ExportedWorldGeometry | null = null\n  private importedMeshes: THREE.Group[] = []\n  private readonly geometryUrl: string | null\n\n  constructor () {\n    const qs = new URLSearchParams(window.location.search)\n    const geometryUrl = qs.get('geometryUrl') ?? 'world-geometry.json'\n\n    // If loading from URL, skip normal world setup (viewDistance 0 means no chunks loaded)\n    super({\n      viewDistance: geometryUrl ? 0 : 1,\n      continuousRender: false,\n      enableCameraOrbitControl: false,\n    })\n\n    this.geometryUrl = geometryUrl\n  }\n\n  // Override initData to load geometry after base initialization completes\n  override async initData () {\n    await super.initData()\n\n    // Now camera and worldRenderer are ready - load geometry if URL provided\n    if (this.geometryUrl) {\n      await this.loadFromUrl(this.geometryUrl)\n    }\n  }\n\n  setupWorld () {\n    if (this.geometryUrl) {\n      return\n    }\n    // Default world setup - add some blocks for testing\n    this.addWorldBlock(0, 0, 0, 'stone')\n    this.addWorldBlock(1, 0, 0, 'grass_block')\n    this.addWorldBlock(0, 0, 1, 'dirt')\n    this.addWorldBlock(1, 0, 1, 'cobblestone')\n    this.addWorldBlock(0, 1, 0, 'oak_log')\n    this.addWorldBlock(1, 1, 0, 'oak_planks')\n  }\n\n  private async loadFromUrl (url: string) {\n    try {\n      console.log('Loading geometry from:', url)\n      this.loadedGeometry = await loadWorldGeometryFromUrl(url)\n\n      // Restore camera position and rotation\n      const { camera: camData } = this.loadedGeometry\n      this.camera.position.set(camData.position.x, camData.position.y, camData.position.z)\n\n      // Apply rotation using lookAt direction\n      const { pitch, yaw } = camData.rotation\n      const forward = new THREE.Vector3(\n        -Math.sin(yaw) * Math.cos(pitch),\n        Math.sin(pitch),\n        -Math.cos(yaw) * Math.cos(pitch)\n      )\n      this.camera.lookAt(\n        camData.position.x + forward.x,\n        camData.position.y + forward.y,\n        camData.position.z + forward.z\n      )\n      this.controls?.update()\n      this.syncCameraToBackend()\n\n      // Determine which material to use\n      let material: THREE.Material\n      if (this.loadedGeometry.textureAtlasDataUrl) {\n        // Use embedded texture from exported file\n        const texture = await loadTextureFromDataUrl(this.loadedGeometry.textureAtlasDataUrl)\n        material = new THREE.MeshLambertMaterial({\n          map: texture,\n          vertexColors: true,\n          transparent: true,\n          alphaTest: 0.1\n        })\n      } else {\n        // Use worldRenderer's material (which has the texture atlas loaded)\n        // The UVs in exported geometry reference positions in this atlas\n        material = this.worldRenderer.material\n      }\n\n      // Create meshes from exported geometry\n      this.importedMeshes = createMeshesFromExport(this.loadedGeometry, material)\n\n      // Add meshes to scene\n      const { scene } = this.worldRenderer\n      for (const mesh of this.importedMeshes) {\n        scene.add(mesh)\n      }\n\n      console.log(`Loaded ${this.importedMeshes.length} sections from geometry file`)\n      this.requestRender()\n\n    } catch (err) {\n      console.error('Failed to load geometry:', err)\n    }\n  }\n\n  private exportGeometry (includeTexture = false) {\n    const { worldRenderer } = this\n    if (!worldRenderer) {\n      console.error('WorldRenderer not available')\n      return\n    }\n\n    // Get camera position and rotation\n    const cameraPosition = {\n      x: this.camera.position.x,\n      y: this.camera.position.y,\n      z: this.camera.position.z\n    }\n\n    // Extract yaw/pitch from camera quaternion\n    const forward = new THREE.Vector3(0, 0, -1)\n    forward.applyQuaternion(this.camera.quaternion)\n    const cameraRotation = {\n      yaw: Math.atan2(-forward.x, -forward.z),\n      pitch: Math.asin(forward.y)\n    }\n\n    // Generate filename with timestamp\n    const timestamp = new Date().toISOString().replaceAll(/[:.]/g, '-')\n    const filename = `world-geometry-${timestamp}.json`\n\n    downloadWorldGeometry(worldRenderer, cameraPosition, cameraRotation, filename, includeTexture)\n    console.log('Geometry exported to:', filename)\n  }\n\n}\n","import { BasePlaygroundScene } from './baseScene'\nimport { playgroundGlobalUiState } from './playgroundUi'\nimport * as scenes from './scenes'\n\nconst qsScene = new URLSearchParams(window.location.search).get('scene')\nconst Scene: typeof BasePlaygroundScene = qsScene ? scenes[qsScene] : scenes.main\nplaygroundGlobalUiState.scenes = ['main', 'railsCobweb', 'floorRandom', 'lightingStarfield', 'transparencyIssue', 'entities', 'frequentUpdates', 'slabsOptimization', 'allEntities', 'geometryExport']\nplaygroundGlobalUiState.selected = qsScene ?? 'main'\n\nconst scene = new Scene()\nglobalThis.scene = scene\n"],"names":["_globalThis_includedVersions","playgroundGlobalUiState","proxy","Playground","useEffect","style","document","Controls","SceneSelector","ActionsSelector","mobile","isMobile","_useSnapshot","scenes","selected","_useState","hidden","setHidden","longPressEvents","useLongPress","scene","qs","URLSearchParams","window","location","renderToDom","actions","selectorOpened","Object","name","action","usingTouch","navigator","e","pressedKeys","Set","useInterfaceState","_param","coord","state","vec3","Vec3","key","KeyboardEvent","_iteratorError","k","css","LeftTouchArea","RightTouchArea","THREE","includedVersions","supportedVersions","BasePlaygroundScene","config","GUI","performance","Error","undefined","appViewer","onParamsUpdate","paramName","object","updateQs","valueSet","newQs","_this_params_skipQs","value","renderFinish","initGui","parsed","Number","_iteratorError1","_option_options","param","option","setTimeout","property","_this_onParamUpdate","_this_paramOptions_property","setupWorld","sceneReset","addWorldBlock","xOffset","yOffset","zOffset","blockName","properties","block","loadedData","syncCameraToBackend","onlyRotation","forward","yaw","Math","pitch","pos","resetCamera","_this_controls","_this_controls1","targetPos","cameraPos","initData","mcData","world","canvas","controls","cameraSet","_cameraSet_split_map","x","y","z","rx","ry","throttledCamQsUpdate","throttledCameraSync","mouseMoveCounter","mouseMove","require","ChunkLoader","BlockLoader","getSyncWorld","appGraphicBackends","getInitialPlayerState","OrbitControls","localStorage","_","setInterval","mainDebugLoop","requestAnimationFrame","loop","requestRender","setupDebugFpsGui","trackFrame","now","delay","oneSecondAgo","time","updateDebugInfo","fps","delayText","isSeriousDelay","render","fromLoop","addKeyboardShortcuts","direction","keys","code","onResize","MainScene","_key","args","_this_metadataFolder","console","props","states","_mcData_blocksByStateId_this_getBlock_minStateId","_this_getBlock","defaultValue","EntityMesh","b","a","entityUpdateShared","enableSkeletonDebug","obj","children","isSkeletonHelper","Array","child","_type_of","TWEEN_DURATION","getBlock","blockId","_block_stateId","err","update","blockIsomorphicRenderBundle","renderer","onlyCurrent","confirm","sizeRaw","prompt","size","parseInt","rad","allBlocks","blockCount","updateBlock","Promise","resolve","onWorldUpdate","zip","JSZip","end","blob","dataUrlZip","URL","nextBlock","_onWorldUpdate","dataUrl","RailsCobwebScene","_this_params_squareSize","squareSize","maxSquareSize","fullBlocks","_b_shapes","shape","i","worldView","_worldView","_worldView1","_worldView2","_worldView3","viewer","RotationIssueScene","j","testNeighborUpdates","setupTimer","lastTime","tick","updateEach","updateCount","maxSquareRadius","done","AllEntities","_superprop_get_initData","displayEntitiesDebugList","_qs_get","geometryUrl","loadFromUrl","url","camData","_camData_rotation","material","texture","mesh","loadWorldGeometryFromUrl","_this_loadedGeometry","loadTextureFromDataUrl","createMeshesFromExport","exportGeometry","includeTexture","worldRenderer","cameraPosition","cameraRotation","timestamp","Date","filename","downloadWorldGeometry","qsScene","Scene","globalThis"],"mappings":"wIAoCyBA,EC3BAA,E,qsCCAlB,IAAMC,EAA0BC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAM,CAC3C,OAAQ,EAAE,CACV,SAAU,GACV,eAAgB,GAChB,QAAS,CAAC,CACZ,GAOA,SAASC,aAeP,MAdAC,AAAAA,GAAAA,EAAAA,SAAAA,AAAAA,EAAU,WACR,IAAMC,EAAQC,SAAS,aAAa,CAAC,SAQrC,OAPAD,EAAM,SAAS,CAAc,iGAM7BC,SAAS,IAAI,CAAC,WAAW,CAACD,GACnB,WACLA,EAAM,MAAM,EACd,CACF,EAAG,EAAE,EAEE,WAAC,OAAI,MAAO,CACjB,WAAY,YACZ,MAAO,OACT,E,UACE,UAACE,SAAAA,CAAAA,GACD,UAACC,cAAAA,CAAAA,GACD,UAACC,gBAAAA,CAAAA,G,EAEL,CAEA,SAASD,gBACP,IAAME,EAASC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACcC,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAYX,GAAjCY,EAAqBD,EAArBC,MAAM,CAAEC,EAAaF,EAAbE,QAAQ,CACIC,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAS,OAA9BC,EAAqBD,CAAAA,CAAAA,EAAAA,CAAbE,EAAaF,CAAAA,CAAAA,EAAAA,CACtBG,EAAkBC,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAa,WACnClB,EAAwB,cAAc,CAAG,EAC3C,EAAG,WAAQ,UAEX,AAAIe,EAAe,KAEZ,WAAC,uBACN,MAAO,CACL,SAAU,QACV,IAAK,EACL,KAAM,EACN,QAAS,OACT,WAAY,YACd,C,EAAOE,GAAAA,C,UACP,UAAC,OAAI,MAAO,CAAE,QAAS,OAAQ,cAAe,QAAS,E,SACpDL,EAAO,GAAG,CAACO,SAAAA,CAAK,E,MAAI,UAAC,OAEpB,MAAO,CACL,QAASV,EAAS,MAAQ,UAC1B,OAAQ,UACR,WAAY,OACZ,WAAYU,IAAUN,EAAW,qBAAuB,qBACxD,WAAYM,IAAUN,EAAW,OAAS,QAC5C,EACA,QAAS,WACP,IAAMO,EAAK,IAAIC,gBAAgBC,OAAO,QAAQ,CAAC,MAAM,EACrDF,EAAG,GAAG,CAAC,QAASD,GAChBI,SAAS,MAAM,CAAGH,EAAG,QAAQ,EAC/B,E,SACAD,C,EAbKA,E,KAeT,UAAC,OACC,MAAO,CACL,QAASV,EAAS,MAAQ,UAC1B,OAAQ,UACR,WAAY,OACZ,WAAY,qBACZ,SAAU,OACV,WAAY,GACd,EACA,QAAS,W,OAAMO,EAAU,G,WAC1B,M,MAEL,CA7EAQ,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAY,UAACtB,WAAAA,CAAAA,GAAe,CAC1B,WAAY,GACZ,SAAU,aACZ,GA4EA,IAAMM,gBAAkB,WACtB,IAAoCG,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAYX,GAAxCyB,EAA4Bd,EAA5Bc,OAAO,QAEf,AAFoCd,EAAnBe,cAAc,CAGxB,UAAC,OAAI,MAAO,CACjB,SAAU,QACV,MAAO,EACP,WAAY,qBACZ,OAAQ,GACR,QAAS,OACT,cAAe,SACf,eAAgB,SAChB,WAAY,SACZ,IAAK,EACL,SAAU,EACZ,E,SAAIC,OAAO,OAAO,CAAC,mBACZF,GAAAA,CACH,iBACEzB,EAAwB,cAAc,CAAG,EAC3C,C,IACC,GAAG,CAAC,Y,mBAAE4B,EAAAA,CAAAA,CAAAA,EAAAA,CAAMC,EAAAA,CAAAA,CAAAA,EAAAA,C,MAAY,UAAC,OAE1B,MAAO,CACL,QAAS,UACT,OAAQ,UACR,WAAY,OACZ,WAAY,oBACd,EACA,QAAS,WACPA,IACA7B,EAAwB,cAAc,CAAG,EAC3C,E,SACA4B,C,EAXKA,E,KAlBmB,IA8B9B,EAEMtB,SAAW,WAEf,IAAMwB,EAAaC,UAAU,cAAc,CAAG,QAuC9C,CArCA5B,AAAAA,GAAAA,EAAAA,SAAAA,AAAAA,EAAU,WACRmB,OAAO,gBAAgB,CAAC,aAAc,SAACU,CAAC,EACtCA,EAAE,cAAc,EAClB,GAEA,IAAMC,EAAc,IAAIC,IACxBC,EAAAA,CAAAA,CAAAA,QAA0B,CAAC,CACzB,SAAU,GACV,gBAAiB,CACf,gBAAiB,EACnB,EACA,qBAAaC,CAAc,E,IAAdA,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,EAAAA,GAACC,EAADD,CAAAA,CAAAA,EAAAA,CAAQE,EAARF,CAAAA,CAAAA,EAAAA,CACLG,EAAO,IAAIC,EAAAA,CAAIA,CAAC,EAAG,EAAG,EAC5BD,CAAAA,CAAI,CAACF,EAAM,CAAGC,EAEVC,EAAK,CAAC,CAAG,GAAGE,CAAAA,EAAM,MAAK,EACvBF,EAAK,CAAC,CAAG,GAAGE,CAAAA,EAAM,MAAK,EACvBF,EAAK,CAAC,CAAG,GAAGE,CAAAA,EAAM,OAAM,EACxBF,EAAK,CAAC,CAAG,GAAGE,CAAAA,EAAM,WAAU,EAC5BF,EAAK,CAAC,CAAG,GAAGE,CAAAA,EAAM,MAAK,EACvBF,EAAK,CAAC,CAAG,GAAGE,CAAAA,EAAM,MAAK,EACvBA,GACE,CAACR,EAAY,GAAG,CAACQ,KACnBR,EAAY,GAAG,CAACQ,GAChBnB,OAAO,aAAa,CAAC,IAAIoB,cAAc,UAAW,CAAE,KAAMD,CAAI,K,IAG7DE,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAbIF,EAaCE,EAAAA,EAAWV,CAAW,CAAXA,OAAAA,QAAAA,CAAAA,GAAXU,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAwB,CAAxBA,IAAMC,EAAND,EAAAA,KAAAA,CACCC,IAAMH,IACRnB,OAAO,aAAa,CAAC,IAAIoB,cAAc,QAAS,CAAE,KAAME,CAAE,IAC1DX,EAAY,MAAM,CAACW,GAEvB,C,UALKD,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAMP,CACF,EACF,EAAG,EAAE,EAEAb,GAEH,WAAC,OACC,MAAO,CAAE,OAAQ,CAAE,EACnB,UAAWe,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAGA,+B,UAed,UAACC,EAAAA,EAAaA,CAAAA,CAAAA,GACd,UAAC,UACD,UAACC,EAAAA,EAAcA,CAAAA,CAAAA,G,GArBK,IAwB1B,E,ohBF5KAzB,CAAAA,OAAO,KAAK,CAAG0B,EAaf,IAAMC,EAAmBlD,MAAAA,CAAAA,EAAAA,WAAW,gBAAgB,AAAD,EAA1BA,EAA+BmD,EAAAA,EAAiBA,CAE5DC,EAAN,W,SAAMA,sB,WA8DEC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,AAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,CAAAA,SAAAA,CAAAA,EAAAA,CAAgC,CAAC,EAK5C,G,aAnESD,qB,KAEX,gBAAgB,CAAG,G,KACnB,UAAU,CAAG,G,KACb,YAAY,CAAG,G,KAGf,YAAY,CAAG,E,KACf,SAAS,CAAG,IAAIX,EAAAA,CAAIA,CAAC,EAAG,GAAI,G,KAC5B,OAAO,CAAW,IAAInB,gBAAgBC,OAAO,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,YAAc2B,EAAiB,EAAE,CAAC,I,KAQpG,GAAG,CAAG,IAAII,EAAAA,EAAGA,C,KACb,MAAM,CAAG,CAAC,E,KACV,YAAY,CAAG,CAAC,E,KAOhB,aAAa,CAAG,CAAC,E,KACjB,cAAc,CAAG,EAAE,C,KACnB,YAAY,CAAG,G,KAGf,oBAAoB,CAAG,G,KACvB,wBAAwB,CAAG,G,KASnB,UAAU,CAAG,E,KACb,cAAc,CAAGC,YAAY,GAAG,G,KAChC,UAAU,CAAa,EAAE,C,KACzB,UAAU,CAAG,E,KACb,aAAa,CAAG,EAmBlBF,EAAO,OAAO,EAAE,KAAI,CAAC,OAAO,CAAGA,EAAO,OAAO,AAAD,EAG5C,CAAC,IAAI,CAAC,OAAO,CACf,MAAM,AAAIG,MAAM,+BAGdH,AAAwBI,MAAAA,IAAxBJ,EAAO,YAAY,EAAgB,KAAI,CAAC,YAAY,CAAGA,EAAO,YAAY,AAAD,EACzEA,EAAO,SAAS,EAAE,KAAI,CAAC,SAAS,CAAGA,EAAO,SAAS,AAAD,EAClDA,AAAgCI,KAAAA,IAAhCJ,EAAO,oBAAoB,EAAgB,KAAI,CAAC,oBAAoB,CAAGA,EAAO,oBAAoB,AAAD,EACjGA,AAAoCI,KAAAA,IAApCJ,EAAO,wBAAwB,EAAgB,KAAI,CAAC,wBAAwB,CAAGA,EAAO,wBAAwB,AAAD,EAC7GA,EAAO,WAAW,EAEpBzB,OAAO,MAAM,CAAC8B,UAAU,sBAAsB,CAAEL,EAAO,WAAW,EAEpEK,UAAU,sBAAsB,CAAC,QAAQ,CAAG,GAC5CA,UAAU,sBAAsB,CAAC,YAAY,CAAG,GAChDA,UAAU,sBAAsB,CAAC,mBAAmB,CAAG,IAAI,CAAC,wBAAwB,CACpFA,UAAU,MAAM,CAAC,YAAY,CAAG,EAC5BL,AAA4BI,KAAAA,IAA5BJ,EAAO,gBAAgB,EAAgB,KAAI,CAAC,gBAAgB,CAAGA,EAAO,gBAAgB,AAAD,EAEpF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WACxB,EAAK,oBAAoB,EAC3B,E,OAvFSD,oBAAAA,SAAAA,C,OA0FXO,EAAAA,cAAkD,CAAlDA,SAAgBC,CAAiB,CAAEC,CAAW,EAAG,EAEjDC,EAAAA,QAYC,CAZDA,SAAUF,CAAiB,CAAEG,CAAa,EACxC,IAAI,IAAI,CAAC,YAAY,EACrB,IAAMC,EAAQ,IAAI1C,gBAAgBC,OAAO,QAAQ,CAAC,MAAM,EACnDqB,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAsBhB,OAAO,OAAO,CAAG,WAACgC,EAAYG,GAAAA,CAAAA,OAAAA,QAAAA,CAAAA,GAApDnB,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAiE,CAAjEA,IACgCqB,EADhCrB,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,EAAAA,KAAAA,CAAAA,GAAOF,EAAAA,CAAAA,CAAAA,EAAAA,CAAKwB,EAAAA,CAAAA,CAAAA,EAAAA,AACM,aAAjB,OAAOA,GAAU,OAAcD,CAAAA,EAAAA,IAAI,CAAC,MAAM,CAAC,MAAM,AAAD,EAAjBA,KAAAA,EAAAA,EAAoB,QAAQ,CAACvB,EAAG,GAAK,IAAI,CAAC,cAAc,CAAC,QAAQ,CAACA,KACjGwB,EACFF,EAAM,GAAG,CAACtB,EAAKwB,GAEfF,EAAM,MAAM,CAACtB,GAEjB,C,UAPKE,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAQLrB,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,EAAG,GAAK,GAA8ByC,MAAAA,CAA5BzC,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAoB,OAAjByC,EAAM,QAAQ,KACnF,EAEAG,EAAAA,YAEC,CAFDA,WACE,IAAI,CAAC,aAAa,EACpB,EAEAC,EAAAA,OAqCC,CArCDA,W,WACQ/C,EAAK,IAAIC,gBAAgBC,OAAO,QAAQ,CAAC,MAAM,EAChDqB,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAahB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAD,mBAApCgB,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAuC,CAAvCA,IAAMF,EAANE,EAAAA,KAAAA,CACGsB,EAAQ7C,EAAG,GAAG,CAACqB,GACrB,GAAKwB,GACL,IAAMG,EAAS,UAAU,IAAI,CAACH,GAASI,OAAOJ,GAASA,AAAU,SAAVA,GAA0BA,AAAU,UAAVA,GAA4BA,CAC7G,KAAI,CAAC,MAAM,CAACxB,EAAI,CAAG2B,EACrB,C,UALKzB,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,MAOA2B,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAe3C,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAD,mBAAtC2C,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAyC,CAAzCA,IAG8BC,EAHxBC,EAANF,EAAAA,KAAAA,CACGG,EAAS,IAAI,CAAC,YAAY,CAACD,EAAM,OACnCC,GAAAA,EAAQ,IAAI,EAChB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAED,EAAOD,MAAAA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAQ,OAAO,AAAD,EAAdA,EAAmBE,MAAAA,EAAAA,KAAAA,EAAAA,EAAQ,GAAG,CAAEA,MAAAA,EAAAA,KAAAA,EAAAA,EAAQ,GAAG,CAC9E,C,UAJKH,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAKDhD,OAAO,WAAW,CAAG,IACvB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAEdoD,WAAW,WACT,EAAK,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,aACvC,EAAG,KAGL,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,Y,IAAGC,EAAAA,EAAAA,QAAQ,CAAEf,EAAAA,EAAAA,MAAM,CACnC,GAAIA,IAAW,EAAK,MAAM,CAAE,C,MAC1BgB,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAK,aAAa,AAAD,CAAC,CAACD,EAAS,AAAD,GAA3BC,EAAAA,IAAAA,CAAAA,GACA,EAAK,cAAc,CAACD,EAAUf,GAC9B,IAFAgB,EAAAA,EAGIC,EADEZ,EAAQ,EAAK,MAAM,CAACU,EAAS,AAC/BE,CAAAA,OAAAA,CAAAA,EAAAA,EAAK,YAAY,CAACF,EAAS,AAAD,EAA1BE,KAAAA,EAAAA,EAA6B,cAAc,AAAD,GAAM,CAAiB,WAAjB,OAAOZ,GAAuB,EAAK,YAAY,CAACU,EAAS,CAAC,OAAM,GAClHD,WAAW,WACTpD,OAAO,QAAQ,CAAC,MAAM,EACxB,GAEF,EAAK,QAAQ,CAACqD,EAAUV,EAC1B,MACE,EAAK,cAAc,CAACU,EAAUf,EAElC,EACF,EAGAkB,EAAAA,UAAiB,CAAjBA,WAAgB,EAChBC,EAAAA,UAAgB,CAAhBA,WAAe,EAGfC,EAAAA,aAOC,CAPDA,SAAeC,CAAe,CAAEC,CAAe,CAAEC,CAAe,CAAEC,CAAqB,CAAEC,CAAgC,EACvH,GAAIJ,EAAU,IAAMC,EAAU,IAAMC,EAAU,GAAI,MAAM,AAAI5B,MAAM,kBAClE,IAAM+B,EACJD,EACE,IAAI,CAAC,KAAK,CAAC,cAAc,CAACE,WAAW,YAAY,CAACH,EAAU,CAAC,EAAE,CAAEC,MAAAA,EAAAA,EAAc,CAAC,EAAG,GACnF,IAAI,CAAC,KAAK,CAAC,WAAW,CAACE,WAAW,YAAY,CAACH,EAAU,CAAC,YAAY,CAAE,GAC5E,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAACH,EAASC,EAASC,GAAUG,EACxE,EAIA,EAAUE,mBAqBT,CArBD,W,IAA+BC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,AAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,SAAAA,CAAAA,EAAAA,CAC7B,GAAI,AAAChC,UAAU,OAAO,EAAK,IAAI,CAAC,MAAM,EAItC,IAAMiC,EAAU,IAAI1C,EAAAA,CAAa,CAAC,EAAG,EAAG,IACxC0C,EAAQ,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAI9C,IAAMC,EAAMC,KAAK,KAAK,CAAC,CAACF,EAAQ,CAAC,CAAE,CAACA,EAAQ,CAAC,EAEvCG,EAAQD,KAAK,IAAI,CAACF,EAAQ,CAAC,EAEjC,GAAID,EAAc,YAChBhC,UAAU,OAAO,CAAC,YAAY,CAAC,KAAMkC,EAAKE,GAI5C,IAAMC,EAAM,IAAItD,EAAAA,CAAIA,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAC3FiB,UAAU,OAAO,CAAC,YAAY,CAACqC,EAAKH,EAAKE,GAC3C,EAEAE,EAAAA,WAWC,CAXDA,WACE,GAAK,IAAI,CAAC,MAAM,EAChB,IACAC,EAKAC,EANQC,EAAc,IAAI,CAAlBA,SAAS,A,OACjBF,CAAAA,EAAAA,IAAI,CAAC,QAAQ,AAAD,GAAZA,EAAe,MAAM,CAAC,GAAG,CAACE,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,IAE9E,IAAMC,EAAYD,EAAU,MAAM,CAAC,EAAG,EAAG,GACzC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAACC,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,IAC7E,IAAI,CAAC,MAAM,CAAC,MAAM,CAACD,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,I,MACvED,CAAAA,EAAAA,IAAI,CAAC,QAAQ,AAAD,GAAZA,EAAe,MAAM,GAErB,IAAI,CAAC,mBAAmB,GAC1B,EAEA,EAAMG,QAyJL,CAzJD,W,iBAAA,mB,IAEQC,EAMAC,EA8CEC,EAEEC,EAQAC,EAKJT,EAH0BU,EAAnBC,EAAGC,EAAGC,EAAGC,EAAIC,EAOhBC,EAYEC,EAmBNC,EACEC,E,uDAxGR,O,EAAM7F,OAAO,aAAa,G,QAkB1B,OAlBA,SACM+E,EAAsBe,EAAQ,OAAkB,EAAK,OAAO,EAClE9F,OAAO,UAAU,CAAGA,OAAO,MAAM,CAAG+E,EAEpC,EAAK,KAAK,CAAIgB,IAAoB,EAAK,OAAO,EAC9C,EAAK,KAAK,CAAIC,IAAoB,EAAK,OAAO,EAG9ChB,AADMA,CAAAA,EAAQiB,AAAAA,GAAAA,EAAAA,YAAAA,AAAAA,EAAa,EAAK,OAAO,GACjC,eAAe,CAAC,EAAK,SAAS,CAAE,GACtC,EAAK,KAAK,CAAGjB,EAEb,EAAK,OAAO,GAMZ7C,UAAU,gBAAgB,CAAC,aAAa,CAAG,CAAE,QAAS,EAAK,OAAO,CAAE,eAAgB,EAAK,EACzF,C,EAAMA,UAAU,gBAAgB,CAAC,cAAc,CAAC,EAAK,OAAO,E,QAC5D,OADA,SACA,C,EAAMA,UAAU,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,G,WAAnD,SAGKA,UAAU,OAAO,CAAlB,O,KACF,O,EAAMA,UAAU,WAAW,CAAC+D,EAAAA,CAAAA,CAAAA,IAAqB,E,QAAjD,S,iBAKF,O,EAAM/D,UAAU,UAAU,CAAC6C,EAAO,EAAK,YAAY,CAAErG,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAMwH,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,KAA0B,EAAK,SAAS,E,WAAnG,SAGA,EAAK,SAAS,CAAGhE,UAAU,SAAS,CAIpC,EAAK,MAAM,CAAG,IAAIT,EAAAA,CAAuB,CACvCS,UAAU,sBAAsB,CAAC,GAAG,EAAI,GACxCnC,OAAO,UAAU,CAAGA,OAAO,WAAW,CACtC,GACA,KAIF,EAAK,UAAU,G,CAGX,EAAK,SAAS,CAAd,O,KAEF,OADA,EAAK,SAAS,CAAC,WAAW,CAAG,EAC7B,C,EAAM,EAAK,SAAS,CAAC,IAAI,CAAC,EAAK,SAAS,E,QAAxC,S,wBAIE,EAAK,oBAAoB,EACrBiF,CAAAA,EAASlG,SAAS,aAAa,CAAC,iBAAgB,IAE9CmG,EAAW,EAAK,wBAAwB,CAC1C,IAAIkB,EAAAA,CAAaA,CAAC,EAAK,MAAM,CAAEnB,GAC/B/C,KAAAA,EACJ,EAAK,QAAQ,CAAGgD,EAEhB,EAAK,WAAW,GAGVC,CAAAA,EAAY,EAAK,MAAM,CAAC,MAAM,EAAIkB,aAAa,MAAM,AAAD,IAEjDhB,EAAmBD,AAAAA,CAAAA,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,EAAU,KAAK,CAAC,KAAK,GAAG,CAACrC,QAAAA,EAAAA,CAAzBqC,CAAAA,EAAAA,CAAhBE,EAAgBF,CAAAA,CAAAA,EAAAA,CAAbG,EAAaH,CAAAA,CAAAA,EAAAA,CAAVI,EAAUJ,CAAAA,CAAAA,EAAAA,CAANK,EAAML,CAAAA,CAAAA,EAAAA,CAC1B,EAAK,MAAM,CAAC,QAAQ,CAAC,GAAG,CAACC,EAAGC,EAAGC,GAC/B,EAAK,MAAM,CAAC,QAAQ,CAAC,GAAG,CAACC,EAAIC,EAAI,EAAG,O,MACpCf,CAAAA,EAAAA,EAAK,QAAQ,AAAD,GAAZA,EAAe,MAAM,IAIjBgB,EAAuBY,IAAAA,QAAU,CAAC,WACjC,EAAK,MAAM,EAChBD,CAAAA,aAAa,MAAM,CAAG,CACpB,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAC/B,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAC/B,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAC/B,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAC/B,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAChC,CAAC,IAAI,CAAC,IAAG,CACZ,EAAG,KAEC,EAAK,QAAQ,EACTV,EAAsBW,IAAAA,QAAU,CAAC,WAEvC,EAAG,IAEH,EAAK,QAAQ,CAAC,gBAAgB,CAAC,SAAU,WACvCX,IACAD,IACA,EAAK,aAAa,EACpB,IAEAa,YAAY,WACVb,GACF,EAAG,MAML,CAAC,EAAK,wBAAwB,EAAI,EAAK,MAAM,GAC3CE,EAAmB,EACjBC,EAAY,SAACnF,CAAC,EACbA,EAAE,MAAM,CAAiB,OAAO,CAAC,cAClCA,CAAAA,AAAc,IAAdA,EAAE,OAAO,EAAUA,AAAkB,UAAlBA,EAAE,WAAW,AAAW,IAC7CkF,IACA,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAIlF,EAAE,SAAS,CAAG,IACxC,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAIA,EAAE,SAAS,CAAG,IACpC,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAG,CAAC4D,KAAK,EAAE,CAAG,GAAG,GAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAG,CAACA,KAAK,EAAE,CAAG,GAC3E,EAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAGA,KAAK,EAAE,CAAG,GAAG,GAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAGA,KAAK,EAAE,CAAG,GAC7E,EAAK,mBAAmB,CAAC,KAET,IAAd5D,EAAE,OAAO,GACX,EAAK,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAG,EAAG,GAC/B,EAAK,mBAAmB,IAE5B,EACA6F,YAAY,WACVX,EAAmB,CACrB,EAAG,KACH5F,OAAO,gBAAgB,CAAC,cAAe6F,IAIzC,EAAK,QAAQ,GACb7F,OAAO,gBAAgB,CAAC,SAAU,W,OAAM,EAAK,QAAQ,E,GAGrD,EAAK,gBAAgB,GAoBrB,EAAK,YAAY,GACjB,EAAK,aAAa,G,MACpB,I,EAEAwG,EAAAA,aAGC,CAHDA,W,WACEC,sBAAsB,W,OAAM,EAAK,aAAa,E,GAC9C,IAAI,CAAC,UAAU,EACjB,EAEAC,EAAAA,IAKC,CALDA,W,UACM,KAAI,CAAC,gBAAgB,EAAI,CAAC,IAAI,CAAC,YAAY,GAC7C,IAAI,CAAC,aAAa,GAClBD,sBAAsB,W,OAAM,EAAK,IAAI,E,GAEzC,EAKAE,EAAAA,aAGC,CAHDA,WAGA,EAEA,EAAQC,gBAuBP,CAvBD,W,UAEE,KAAI,CAAC,eAAe,CAAG7H,SAAS,aAAa,CAAC,OAC9C,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAG,QACtC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAG,IACpC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAG,IAClC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAG,OACpC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,eAAe,CAAG,qBAC7C,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,KAAK,CAAG,OACnC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,CAAG,UACrC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAG,YACxC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAG,OACtC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAG,MACxC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,aAAa,CAAG,OAC3C,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,UAAU,CAAG,OACxC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAG,qBAEnCA,SAAS,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAG9CwH,YAAY,WACV,EAAK,eAAe,EACtB,EAAG,IACL,EAEA,EAAQM,UAgBP,CAhBD,WACE,IAAMC,EAAM9E,YAAY,GAAG,GAK3B,GAJA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC8E,GACrB,IAAI,CAAC,UAAU,GAGX,IAAI,CAAC,UAAU,CAAC,MAAM,CAAG,EAAG,CAC9B,IAAMC,EAAQD,EAAM,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,GACnCC,CAAAA,EAAQ,IAAI,CAAC,aAAa,EAC5B,KAAI,CAAC,aAAa,CAAGA,CAAI,CAE7B,CAGA,IAAMC,EAAeF,EAAM,GAC3B,KAAI,CAAC,UAAU,CAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAACG,SAAAA,CAAI,E,OAAIA,EAAOD,C,EAC1D,EAEA,EAAQE,eAqBP,CArBD,WACE,GAAK,IAAI,CAAC,eAAe,EAIzB,IAAMC,EAAM,IAAI,CAAC,UAAU,CAAC,MAAM,AAElC,KAAI,CAAC,UAAU,CAAGA,EAGlB,IAAMC,EAAYC,AADK,IAAI,CAAC,aAAa,CAAG,IAEvC,iCAA8D,OAA9B,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,aAC9D,GAAgC,OAA9B,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,KAGrC,KAAI,CAAC,eAAe,CAAC,SAAS,CAAI,QAA2BD,MAAAA,CAApBD,EAAI,kBAA0B,OAAVC,GAG7D,IAAI,CAAC,cAAc,CAAGpF,YAAY,GAAG,GACrC,IAAI,CAAC,aAAa,CAAG,EACrB,IAAI,CAAC,UAAU,CAAG,EACpB,EAGAsF,EAAAA,MAEC,CAFDA,WAAQC,UAAAA,MAAAA,CAAAA,GAAAA,AAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,SAAAA,CAAAA,EAAAA,CACN,IAAI,CAAC,aAAa,EACpB,EAEAC,EAAAA,oBAsFC,CAtFDA,W,WACEzI,SAAS,gBAAgB,CAAC,UAAW,SAAC2B,CAAC,EACrC,GAAI,CAACA,EAAE,QAAQ,EAAI,CAACA,EAAE,OAAO,EAAI,CAACA,EAAE,MAAM,EAAI,CAACA,EAAE,OAAO,CAAE,CACxD,GAAIA,AAAW,SAAXA,EAAE,IAAI,CAAa,C,IACrBgE,C,OAAAA,CAAAA,EAAAA,EAAK,QAAQ,AAAD,GAAZA,EAAe,KAAK,GACpB,EAAK,WAAW,EAClB,CACIhE,AAAW,SAAXA,EAAE,IAAI,EACR,EAAK,SAAS,CAAE,eAAe,CAAC,EAAK,SAAS,CAAE,EAAK,KAAK,CAAC,eAAe,CAAC,EAAK,SAAS,GAE5E,SAAXA,EAAE,IAAI,GACR,EAAK,UAAU,GACf,EAAK,SAAS,CAAE,eAAe,GAC1B,EAAK,SAAS,CAAE,IAAI,CAAC,EAAK,SAAS,EAE5C,CACF,GACA3B,SAAS,gBAAgB,CAAC,mBAAoB,WAC5C,EAAK,YAAY,CAAGA,AAA6B,WAA7BA,SAAS,eAAe,AAC9C,GACAA,SAAS,gBAAgB,CAAC,OAAQ,WAChC,EAAK,YAAY,CAAG,EACtB,GACAA,SAAS,gBAAgB,CAAC,QAAS,WACjC,EAAK,YAAY,CAAG,EACtB,GAEA,IAAM4B,EAAc,IAAIC,IAwCxB2F,YAvCmB,WACjB,IAAI5F,CAAAA,EAAY,GAAG,CAAC,gBAAkBA,EAAY,GAAG,CAAC,WAAU,GAG3D,EAAK,MAAM,EAEhB,IA6BA+D,EA7BM+C,EAAY,IAAI/F,EAAAA,CAAa,CAAC,EAAG,EAAG,EACtCf,CAAAA,EAAY,GAAG,CAAC,SAClB8G,CAAAA,EAAU,CAAC,CAAG,GAAG,EAEf9G,EAAY,GAAG,CAAC,SAClB8G,CAAAA,EAAU,CAAC,EAAI,EAAE,EAEf9G,EAAY,GAAG,CAAC,SAClB8G,CAAAA,EAAU,CAAC,EAAI,EAAE,EAEf9G,EAAY,GAAG,CAAC,SAClB8G,CAAAA,EAAU,CAAC,EAAI,EAAE,EAGf9G,EAAY,GAAG,CAAC,cAClB,GAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAI,EAAE,EAE1BA,EAAY,GAAG,CAAC,UAClB,GAAK,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAI,EAAE,EAE9B8G,EAAU,eAAe,CAAC,EAAK,MAAM,CAAC,UAAU,EAChDA,EAAU,CAAC,CAAG,EAEV9G,EAAY,GAAG,CAAC,eAClB8G,EAAU,CAAC,EAAI,EACfA,EAAU,CAAC,EAAI,EACfA,EAAU,CAAC,EAAI,GAEjB,EAAK,MAAM,CAAC,QAAQ,CAAC,GAAG,CAACA,EAAU,SAAS,I,MAC5C/C,CAAAA,EAAAA,EAAK,QAAQ,AAAD,GAAZA,EAAe,MAAM,GACrB,EAAK,mBAAmB,GACxB,EAAK,aAAa,GACpB,EACwB,IAExB,IAAMgD,KAAO,SAAChH,CAAC,EACb,IAAQiH,EAASjH,EAATiH,IAAI,AACIjH,AAAW,aAAXA,EAAE,IAAI,CAEpBC,EAAY,GAAG,CAACgH,GAEhBhH,EAAY,MAAM,CAACgH,EAEvB,EAEA3H,OAAO,gBAAgB,CAAC,UAAW0H,MACnC1H,OAAO,gBAAgB,CAAC,QAAS0H,MACjC1H,OAAO,gBAAgB,CAAC,OAAQ,W,IACzBqB,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAaV,CAAW,CAAXA,OAAAA,QAAAA,CAAAA,GAAbU,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAA0B,CAA1BA,IAAMF,EAANE,EAAAA,KAAAA,CACHqG,KAAK,IAAItG,cAAc,QAAS,CAAE,KAAMD,CAAI,GAC9C,C,UAFKE,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAGP,EACF,EAEAuG,EAAAA,QAEC,CAFDA,WACE,IAAI,CAAC,aAAa,EACpB,E,QAzhBW/F,oBAAAA,C,CAiDP,oB,IAAJ,WACE,OAAO7B,OAAO,KAAK,AACrB,C,GAGI,kB,IAAJ,WACE,OAAOmC,UAAU,sBAAsB,AACzC,E,IACA,SAAiBQ,CAAK,EAEpBtC,OAAO,MAAM,CAAC8B,UAAU,sBAAsB,CAAEQ,EAClD,C,IA5DWd,mB,2BC7BPF,GAAmBlD,MAAAA,CAAAA,EAAAA,WAAW,gBAAgB,AAAD,EAA1BA,EAA+BmD,EAAAA,EAAiBA,CAiTzE,OA/SA,Y,SAAMiG,YAESC,IAAAA,I,EAAAA,EAAAA,UAAAA,MAAAA,CAAGC,EAAHD,AAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAGC,CAAI,CAAPD,EAAAA,CAAAA,SAAAA,CAAAA,EAAO,C,mBAFhBD,WAGOE,A,GAAT,aAHEF,UAGI,QAAGE,GAAK,EAwChB,UAAU,CAAG,CAAC,IAIL,aAAa,CAAG,CACvB,mBAKA,EACA,MAAO,WACL,EAAK,UAAU,CAAG,CAAC,E,MACnBC,CAAAA,EAAAA,EAAK,cAAc,AAAD,GAAlBA,EAAqB,OAAO,GAC5B,IAAMhE,EAAQe,OAAO,YAAY,CAAC,EAAK,MAAM,CAAC,KAAK,CAAC,CACpD,GAAKf,GACLiE,QAAQ,GAAG,CAAC,QAASjE,EAAM,IAAI,EAC/B,IAAMkE,EAAQ,IAAI,EAAK,KAAK,CAAClE,EAAM,EAAE,CAAE,EAAG,GAAG,aAAa,GAClDmE,EAAWC,AAAAA,OAAAA,CAAAA,EAAAA,OAAO,eAAe,CAAC,MAAAC,CAAAA,EAAAA,EAAK,QAAQ,EAAC,EAAdA,KAAAA,EAAAA,EAAiB,UAAU,CAAC,AAAD,EAAlDD,EAAuD,CAAC,GAAnED,MAAM,CAEd,GADA,EAAK,cAAc,CAAG,EAAK,GAAG,CAAC,SAAS,CAAC,YACrCA,EAAQ,C,IACL9G,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QARF2G,EAK0CK,EAAvBD,EAGZ/G,EAAAA,EAAe8G,CAAM,CAANA,OAAAA,QAAAA,CAAAA,GAAf9G,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAuB,CAAvBA,IAAML,EAANK,EAAAA,KAAAA,CACCiH,EAAAA,KAAAA,EACJ,GAAItH,EAAM,MAAM,CACdsH,EAAetH,EAAM,MAAM,CAAC,EAAE,MAE9B,OAAQA,EAAM,IAAI,EAChB,IAAK,OACHsH,EAAe,GACf,KACF,KAAK,MACHA,EAAe,EACf,KACF,KAAK,YACHA,EAAe,QACf,KAEF,SACE,QACJ,CAEF,EAAK,UAAU,CAACtH,EAAM,IAAI,CAAC,CAAGsH,EAC1BtH,EAAM,MAAM,CACd,EAAK,cAAc,CAAC,GAAG,CAAC,EAAK,UAAU,CAAEA,EAAM,IAAI,CAAEA,EAAM,MAAM,EAEjE,EAAK,cAAc,CAAC,GAAG,CAAC,EAAK,UAAU,CAAEA,EAAM,IAAI,CAEvD,C,UA1BKK,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EA2BP,KAAO,C,IACA2B,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAuB3C,OAAO,OAAO,CAAC6H,EAAM,CAANA,OAAAA,QAAAA,CAAAA,GAAtClF,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAA8C,CAA9CA,IAAAA,EAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,EAAAA,KAAAA,CAAAA,GAAO1C,EAAAA,CAAAA,CAAAA,EAAAA,CAAMqC,EAAAA,CAAAA,CAAAA,EAAAA,AAChB,GAAK,UAAU,CAACrC,EAAK,CAAGqC,EACxB,EAAK,cAAc,CAAC,GAAG,CAAC,EAAK,UAAU,CAAErC,EAC3C,C,UAHK0C,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAIP,CACAiF,QAAQ,GAAG,CAAC,QAAS,EAAK,UAAU,EACpC,EAAK,cAAc,CAAC,IAAI,GAC1B,EACA,OAAQ,WACN,EAAK,gBAAgB,CAAG,AAAuB,WAAvB,EAAK,MAAM,CAAC,MAAM,CAC1C,EAAK,kBAAkB,GAClB,EAAK,MAAM,CAAC,MAAM,GACI,WAAvB,EAAK,MAAM,CAAC,MAAM,GACpB,EAAK,aAAa,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAM,EAAK,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAE/F,KAAAA,EAAW,GAAM,IACtH,EAAK,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAM,YAQlDqG,GAAAA,EAAAA,CAAAA,aAAwB,CAAC,EAAK,MAAM,CAAC,MAAM,EAK7C,EACA,aAAc,WACZ,EAAK,SAAS,CAAE,eAAe,CAAC,EAAK,SAAS,CAAC,MAAM,CAAC,EAAG,GAAI,GAAI,KAAK,MAAM,CAAC,YAAY,CAC3F,EACA,aAAc,WACZ,EAAK,aAAa,CAAC,mBAAmB,CAAC,iBAAiB,CAAG,AAA6B,IAA7B,EAAK,MAAM,CAAC,YAAY,CAASrG,KAAAA,EAAY,CAAC,EAAK,MAAM,CAAC,YAAY,CAAC,AACpI,CACF,E,UA9HI2F,UAAAA,G,MAAAA,UAAAA,SAAAA,C,OAMJ,EAAShF,OAmCR,CAnCD,WAEE,IAAI,CAAC,MAAM,CAAG,CACZ,QAASlB,GAAiB,EAAE,CAAC,IAC7B,OAAQ,GACR,MAAO,GACP,SAAU,EACV,aAAc,GACd,OAAQ,GACR,wBACE,IAAI,CAAC,MAAM,CAAG,EAChB,EACA,aAAc,GACd,OAAQ,GACR,qBAAe,EACf,uCAAiC,EACjC,aAAc,CAChB,EACA,IAAI,CAAC,WAAW,CAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAE,YAC7C,IAAI,CAAC,YAAY,CAAG,CAClB,QAAS,CACP,QAASA,GACT,KAAM,EACR,EACA,MAAO,CACL,QAASoD,OAAO,WAAW,CAAC,GAAG,CAACyD,SAAAA,CAAC,E,OAAIA,EAAE,IAAI,A,GAAE,IAAI,CAAC,SAACC,CAAC,CAAED,CAAC,E,OAAKC,EAAE,aAAa,CAACD,E,EAC9E,EACA,OAAQ,CACN,QAASzD,OAAO,aAAa,CAAC,GAAG,CAACyD,SAAAA,CAAC,E,OAAIA,EAAE,IAAI,A,GAAE,IAAI,CAAC,SAACC,CAAC,CAAED,CAAC,E,OAAKC,EAAE,aAAa,CAACD,E,EAChF,EACA,OAAQ,CACN,KAAM,EACR,CACF,EACA,gBAxCEX,UAAAA,SAAAA,EAwCI,UAAN,IAAK,YACP,EAuFAa,EAAAA,kBAqBC,CArBDA,W,WAEE,GADA,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,GAC5B,IAAI,CAAC,MAAM,CAAC,MAAM,EACvB,IAAI,CAAC,SAAS,CAAE,IAAI,CAAC,SAAU,CAC7B,GAAI,KAAM,KAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAE,IAAK,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAK,EAAG,IAAM,MAAO,EAAG,OAAQ,EAAG,SAAUrC,aAAa,YAAY,CAAE,IAAK/B,KAAK,EAAE,CAAE,MAAO,CAC9J,GACA,IAAMqE,oBAAsB,SAACC,CAAG,EAC9B,IAAQC,EAA+BD,EAA/BC,QAAQ,CAAEC,EAAqBF,EAArBE,gBAAgB,CAClC,GAAKC,MAAM,OAAO,CAACF,IACnB,GAAIC,EAAkB,CACpBF,EAAI,OAAO,CAAG,GACd,MACF,C,IACKvH,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAewH,CAAQ,CAARA,OAAAA,QAAAA,CAAAA,GAAfxH,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAyB,CAAzBA,IAAM2H,EAAN3H,EAAAA,KAAAA,AACC4H,CAAAA,CAAiB,SAAVD,EAAAA,YAAPC,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAOD,EAAK,IAAK,UAAUL,oBAAoBK,EACrD,C,UAFK3H,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,GAGP,EACAsH,oBAAoB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAK,EAC9DvF,WAAW,WACT,EAAK,MAAM,EACb,EAAG8F,EAAAA,EAAcA,EACnB,EAEAC,EAAAA,QAEC,CAFDA,WACE,OAAOpE,OAAO,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAI,MAAM,AACxD,EAGA,EAAS3C,cAyBR,CAzBD,SAAyBC,CAAiB,CAAEC,CAAW,EAGrD,IAAM8G,EAAU,MAAAf,CAAAA,EAAAA,IAAI,CAAC,QAAQ,EAAC,EAAdA,KAAAA,EAAAA,EAAiB,EAAE,CAEnC,GAJuBhG,AAAc,aAAdA,EAIH,CAClB2B,EAAQ,IAAI,IAAI,CAAC,KAAK,CAACoF,EAAS,EAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EACvD/I,OAAO,MAAM,CAAC,IAAI,CAAC,UAAU,CAAE2D,EAAM,aAAa,I,IAC7C3C,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAa8CgI,EAlBhChB,EACZrE,EAIG3C,EAAAA,EAAgB,IAAI,CAAC,cAAc,CAAE,QAAQ,oBAA7CA,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAEH2H,AAFG3H,EAAAA,KAAAA,CAEG,aAAa,E,UAFhBA,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAIP,MACE,GAAI,CACF2C,EAAQ,IAAI,CAAC,KAAK,CAAC,cAAc,CAACoF,MAAAA,EAAAA,EAAW,GAAI,IAAI,CAAC,UAAU,CAAE,EACpE,CAAE,MAAOE,EAAK,CACZrB,QAAQ,KAAK,CAACqB,GACdtF,EAAQ,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAG,EACpC,CAGF,IAAI,CAAC,SAAS,CAAE,eAAe,CAAC,IAAI,CAAC,SAAS,CAAEqF,MAAAA,CAAAA,EAAAA,EAAM,OAAO,AAAD,EAAZA,EAAiB,GACjEpB,QAAQ,GAAG,CAAC,aAAcjE,EAAM,OAAO,EACvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAGA,EAAM,QAAQ,CACrC,IAAI,CAAC,WAAW,CAAC,aAAa,EAChC,EAEA,EAASpB,YAOR,CAPD,W,IACOvB,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,QAAKA,EAAAA,EAAgBhB,OAAO,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAD,mBAAhDgB,CAAAA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAEHkI,AAFGlI,CAAAA,EAAAA,EAAAA,KAAAA,AAAAA,G,UAAAA,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,EAIL,IAAI,CAAC,cAAc,CAAC,GAAI,CAAC,GACzB,IAAI,CAAC,GAAG,CAAC,YAAY,EACvB,EAEAmI,EAAAA,2BA4GC,CA5GDA,W,WACUC,EAAa,IAAI,CAAC,aAAa,CAA/BA,QAAQ,CAEVxE,EAASwE,EAAS,UAAU,CAC5BC,EAAc,CAACC,QAAQ,4DACvBC,EAAUC,OAAO,OAAQ,OAC/B,GAAKD,GACL,I,IAAME,EAAOC,SAASH,EAAS,GAG/B3E,CAAAA,EAAO,KAAK,CAAG6E,EACf7E,EAAO,MAAM,CAAG6E,EAChBL,EAAS,OAAO,CAACK,EAAMA,GAGvB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAG,IAAIpI,EAAAA,CAAwB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,IAC1E,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAG,KAEtC,IAAMsI,EAAMtI,EAAAA,EAAAA,CAAAA,QAAwB,CAAC,MACrC,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAC9C4C,KAAK,GAAG,CAAC0F,GACT1F,KAAK,GAAG,CAAC0F,GACT,IACA,SAAS,GACX,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,SAAS,CAAG,EAEhD,IAAMnF,EAAY,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAG,EAAG,GACxCN,EAAQ7C,EAAAA,EAAAA,CAAAA,QAAwB,CAAC,KACjC2C,EAAM3C,EAAAA,EAAAA,CAAAA,QAAwB,CAAC,IACrC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC6C,EAAOF,EAAK,EAAG,OAEtD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAACQ,EAAU,CAAC,CAAG,EAAGA,EAAU,CAAC,CAAG,GAAKA,EAAU,CAAC,CAAG,GAEzF,IAAMoF,EAAYlF,OAAO,WAAW,CAAC,GAAG,CAACyD,SAAAA,CAAC,E,OAAIA,EAAE,IAAI,A,GAGhD0B,EAAa,EACbpG,EAAYmG,CAAS,CAAC,EAAE,CAEtBE,YAAc,WAElB,EAAK,MAAM,CAAC,KAAK,CAAGrG,CAKtB,E,OACK,IAAI,CAAC,aAAa,CAAC,qBAAqB,GAAG,IAAI,SAAC,W,uDAEnD,O,EAAM,IAAIsG,QAAQC,SAAAA,CAAO,EACvBjH,WAAWiH,EAAS,EACtB,G,eAFA,SAGIX,GACF,EAAK,MAAM,GACXY,kBAGA,EAAK,aAAa,CAAC,mBAAmB,CAAC,WAAW,CAAC,SAAUA,eAC7DH,e,MAEJ,IAEA,IAAMI,EAAM,GAAIC,CAAAA,GAAAA,EAChBD,EAAI,IAAI,CAAC,kBAAmB,wC,WAEtBE,G,EAAM,mB,IAGJhC,EACAiC,EACAC,E,uDADO,OADPlC,EAAI1J,SAAS,aAAa,CAAC,KACpB,C,EAAMwL,EAAI,aAAa,CAAC,CAAE,KAAM,MAAO,G,eAA9CG,EAAO,SACPC,EAAaC,IAAI,eAAe,CAACF,GACvCjC,EAAE,IAAI,CAAGkC,EACTlC,EAAE,QAAQ,CAAG,oBACbA,EAAE,KAAK,GACPmC,IAAI,eAAe,CAACD,GACpB1C,QAAQ,GAAG,CAAC,OAEZ,EAAK,aAAa,CAAC,mBAAmB,CAAC,cAAc,CAAC,SAAUqC,e,MAClE,G,4CAgBMO,G,EAAY,mB,0DAChB/G,EAAYmG,CAAS,CAACC,IAAa,CACnCjC,QAAQ,GAAG,CAACgC,EAAU,MAAM,CAAE,IAAKC,EAAYpG,GAC3CoG,EAAa,GAAM,EAAnBA,MAAAA,C,KACF,O,EAAM,IAAIE,QAAQC,SAAAA,CAAO,EACvBjH,WAAWiH,EAAS,IACtB,G,QAFA,S,wBAIEvG,EACFqG,cAEAM,I,MAEJ,G,qDA3BeK,gB,OAAAA,eAAAA,KAAAA,CAAAA,IAAAA,CAAAA,U,UAAAA,iB,MAAAA,AAAAA,CAAAA,eAAf,mB,IAIQC,E,uCAAAA,EAAU9F,EAAO,SAAS,CAAC,aAEjCsF,EAAI,IAAI,CAAE,GAAY,OAAVzG,EAAU,QAAOiH,EAAQ,KAAK,CAAC,IAAI,CAAC,EAAE,CAAE,CAAE,OAAQ,EAAK,GAE/DrB,EACFe,IAEAI,I,KAEJ,EAAC,EAbcC,KAAAA,CAAAA,IAAAA,CAAAA,U,CA4BjB,EA5SIjD,S,EAAkBhG,GETT,IAAMmJ,GAAN,Y,SAAMA,mB,mBAAAA,kBAAN,aAAMA,iBAAAA,U,eAAAA,iBAAAA,GACnBxH,AADmBwH,iBAAAA,SAAAA,CACnBxH,UASC,CATDA,WACE,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,UAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,EAAG,UAC7B,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,EAAG,UAC7B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,UAE5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,eAAgB,CAAE,MAAO,cAAe,YAAa,EAAM,GACvF,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,eAAgB,CAAE,MAAO,kBAAmB,YAAa,EAAM,GAC3F,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,eAAgB,CAAE,MAAO,cAAe,YAAa,EAAM,EACzF,EAVmBwH,gB,EAAyBnJ,GCAzBmJ,GAAN,Y,SAAMA,uB,qBAAAA,kB,EAAN,aAAMA,iBAAAA,WAAAA,EACnB,YAAY,CAAG,IACf,gBAAgB,CAAG,G,UAFAA,iBAAAA,G,MAAAA,iBAAAA,SAAAA,C,OAInB,EAASnI,OAMR,CAND,WACE,IAAI,CAAC,MAAM,CAAG,CACZ,WAAY,EACd,EAEA,gBATiBmI,iBAAAA,SAAAA,EASX,UAAN,IAAK,YACP,EAEAxH,EAAAA,UAiBC,CAjBDA,W,IACqByH,E,OAAbC,EAAaD,MAAAA,CAAAA,EAAAA,IAAI,CAAC,MAAM,CAAC,UAAU,AAAD,EAArBA,EAA0B,GACvCE,EAAgB,AAAoB,GAApB,IAAI,CAAC,YAAY,CAAQ,EAC/C,GAAID,EAAaC,EAAe,MAAM,AAAIlJ,MAAO,+BAA4C,OAAdkJ,IAQ/E,IAAK,IANCC,EAAanH,WAAW,WAAW,CAAC,MAAM,CAACD,SAAAA,CAAK,EACpD,IACIqH,EADE7C,EAAI,EAAK,KAAK,CAAC,WAAW,CAACxE,EAAM,YAAY,CAAE,GACrD,GAAIqH,AAAAA,OAAAA,CAAAA,EAAAA,EAAE,MAAM,AAAD,EAAPA,KAAAA,EAAAA,EAAU,MAAM,AAAD,IAAM,EAAG,MAAO,GACnC,IAAMC,EAAQ9C,EAAE,MAAM,CAAC,EAAE,CACzB,OAAO8C,AAAa,IAAbA,CAAK,CAAC,EAAE,EAAUA,AAAa,IAAbA,CAAK,CAAC,EAAE,EAAUA,AAAa,IAAbA,CAAK,CAAC,EAAE,EAAUA,AAAa,IAAbA,CAAK,CAAC,EAAE,EAAUA,AAAa,IAAbA,CAAK,CAAC,EAAE,EAAUA,AAAa,IAAbA,CAAK,CAAC,EAAE,AAC3G,GACSjG,EAAI,CAAC6F,EAAY7F,GAAK6F,EAAY7F,IACzC,IAAK,IAAIE,EAAI,CAAC2F,EAAY3F,GAAK2F,EAAY3F,IAAK,CAC9C,IAAMgG,EAAIjH,KAAK,GAAG,CAACe,EAAIE,GAAK2F,EAC5BM,UAAW,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAACnG,EAAG,EAAGE,GAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC6F,CAAU,CAACG,EAAIH,EAAW,MAAM,CAAC,CAAC,YAAY,CAAE,GACnI,CAEJ,EA7BmBJ,gB,EAAyBnJ,G,WCI/B,e,qDAAA,iCACb,gBAAgB,CAAG,G,kDAEnB,EAAS2B,UAYR,CAZD,W,IAQEiI,EACAC,EACAC,EACAC,CAVAC,CAAAA,OAAO,KAAK,CAAC,YAAY,CAAC,cAAc,CAAG,GAC3CA,OAAO,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAG,EACrC,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,SAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,SAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,SAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,S,MAE5BJ,CAAAA,EAAAA,SAAQ,GAARA,EAAW,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAG,EAAG,GAAI,I,MAC/DC,CAAAA,EAAAA,SAAQ,GAARA,EAAW,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAG,EAAG,GAAI,G,MAC/DC,CAAAA,EAAAA,SAAQ,GAARA,EAAW,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAG,EAAG,GAAI,G,MAC/DC,CAAAA,EAAAA,SAAQ,GAARA,EAAW,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAG,EAAG,GAAI,GACjE,EAEA,EAAShJ,YAeR,CAfD,WACEiJ,OAAO,KAAK,CAAC,UAAU,CAAG,IAAInK,GAAAA,CAAW,CAAC,GAExCmK,OAAO,KAAK,CAAwB,SAAS,CAAC,OAAO,CAAG,GACxDA,OAAO,KAAK,CAAwB,SAAS,CAAC,UAAU,GAC1DA,OAAO,QAAQ,CAAC,MAAM,CAAC,CACrB,GAAI,EACJ,KAAM,SACN,IAAK,IAAI,CAAC,SAAS,CAAC,KAAK,EAC3B,EAAU,CAAC,GACXA,OAAO,QAAQ,CAAC,MAAM,CAAC,CACrB,GAAI,EACJ,KAAM,UACN,IAAK,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAG,EAAG,EACnC,EAAU,CAAC,EACb,E,QAhC2BhK,GCJd,e,6CAAA,8B,yBACb2B,A,iBAAAA,UAMC,CANDA,WACE,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,SAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,sBAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,GAAI,sBAC7B,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,EAAG,sBAC7B,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,GAAI,QAChC,E,QAP2B3B,GCARiK,GAAN,Y,SAAMA,qB,mBAAAA,oBAAN,aAAMA,mBAAAA,U,eAAAA,mBAAAA,GACnBtI,AADmBsI,mBAAAA,SAAAA,CACnBtI,UAEC,CAFDA,WAEA,EAHmBsI,kB,EAA2BjK,GCIjC,e,qDAAA,iCACb,gBAAgB,CAAG,G,kDAEnB,EAASgB,OAMR,CAND,WACE,IAAI,CAAC,MAAM,CAAG,CACZ,UAAW,GACX,OAAQ,SACR,MAAO,CACT,CACF,EAEA,EAASD,YAkBR,CAlBD,WACM,IAAI,CAAC,MAAM,CAAC,SAAS,GACrBiJ,OAAO,KAAK,CAAwB,KAAK,CAAC,UAAU,CAAG,IAAInK,GAAAA,CAAW,CAAC,GACvEmK,OAAO,KAAK,CAAwB,SAAS,CAAC,OAAO,CAAG,GACxDA,OAAO,KAAK,CAAwB,SAAS,CAAC,UAAU,IAG5D,IAAK,IAAIN,EAAI,EAAGA,EAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEA,IACrC,IAAK,IAAIQ,EAAI,EAAGA,EAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEA,IACrC,IAAK,IAAIzK,EAAI,EAAGA,EAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEA,IACrCuK,OAAO,QAAQ,CAAC,MAAM,CAAC,CACrB,GAAIN,AAAI,IAAJA,EAAWQ,AAAI,IAAJA,EAAUzK,EACzB,KAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CACxB,IAAK,IAAI,CAAC,SAAS,CAAC,MAAM,CAACiK,EAAGQ,EAAGzK,EACnC,EAAU,CAAC,EAInB,E,QA7B2BO,GCFd,e,qDAAA,iCACb,YAAY,CAAG,IACf,gBAAgB,CAAG,KAmBnB,iBAAiB,CAAG,IACpB,aAAa,CAAG,E,kDAlBhB,EAASgB,OAeR,CAfD,W,UACE,KAAI,CAAC,MAAM,CAAG,CACZ,WAAY,GACZ,qBAAsB,GACtB,kBAAmB,GACnB,mBAAoB,GACpB,WAAY,WACV,EAAK,WAAW,EAClB,EACA,oBAAqB,WACnB,EAAK,mBAAmB,EAC1B,CACF,EAEA,kCAAM,UAAN,IAAK,YACP,EAIAsH,EAAAA,WAQC,CARDA,WACE,IAAM9E,EAAI,IAAI,CAAC,iBAAiB,CAAG,GAC7BE,EAAIjB,KAAK,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAG,IAE9CkH,UAAW,eAAe,CAAC,IAAItK,EAAAA,CAAIA,CAACmE,EAD1B,GACgCE,GAAI,IAAI,CAAC,aAAa,IAChE,IAAI,CAAC,iBAAiB,GAClB,IAAI,CAAC,iBAAiB,CAAG,KAAS,KAAI,CAAC,iBAAiB,CAAG,GAC3D,IAAI,CAAC,aAAa,CAAG,KAAK,KAAI,CAAC,aAAa,CAAG,EACrD,EAEAyG,EAAAA,mBAgBC,CAhBDA,WACEH,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,EAAG,GAAI,IAAK,GAClD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,GAAI,GAClD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,EAAG,GAAI,GAAI,GAEjD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,GAAI,GAClDkC,WAAW,WACTyI,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,GACnD2K,OAAO,KAAK,CAAC,eAAe,CAAC,IAAI3K,EAAAA,CAAIA,CAAC,GAAI,GAAI,IAAK,EACrD,EAAG,IACL,EAEA+K,EAAAA,UAkEC,CAlEDA,W,WAGMC,EAAW,EACTC,KAAO,WACXN,OAAO,KAAK,CAAC,uBAAuB,CAAG,EAAK,MAAM,CAAC,kBAAkB,CACrE,IAAMO,EAAa,IAAO,EAAK,MAAM,CAAC,oBAAoB,CAE1D,GADA3F,sBAAsB0F,MACjB,EAAK,MAAM,CAAC,UAAU,EAE3B,IAAK,IADCE,EAAc/H,KAAK,KAAK,CAACtC,YAAY,GAAG,GAAKkK,GAAYE,EACtDb,EAAI,EAAGA,EAAIc,EAAad,IAC/B,EAAK,WAAW,GAElBW,EAAWlK,YAAY,GAAG,GAC5B,EAEAyE,sBAAsB0F,KAkDxB,EAEA3I,EAAAA,UAuBC,CAvBDA,W,UACE,KAAI,CAAC,WAAW,CAAC,gBAAgB,CAAG,GAKpC,IAAK,IAHC8I,EAAkB,AAAoB,GAApB,IAAI,CAAC,YAAY,CAGhCjH,EAAI,CADMiH,EACOjH,GADPiH,EACwBjH,IACzC,IAAK,IAAIE,EAAI,CAFI+G,EAES/G,GAFT+G,EAE0B/G,IAEzCiG,UAAW,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAACnG,EAAG,EAAGE,GAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAG,IANxF,IASIgH,EAAO,GACXV,OAAO,KAAK,CAAC,mBAAmB,CAAC,EAAE,CAAC,SAAU,WACvCA,OAAO,KAAK,CAAC,iBAAiB,GAAIU,IACvCA,EAAO,GACP,EAAK,UAAU,GACjB,GACAnJ,WAAW,WACL,EAAK,MAAM,CAAC,iBAAiB,EAC/B,EAAK,WAAW,EAEpB,EACF,E,QA9I2BvB,GCFd,e,qDAAA,iCACb,qBAAqB,CAAG,KACxB,wBAAwB,CAAG,G,0BAE3B2B,A,iBAAAA,UAQC,CARDA,WACE,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,cAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,SAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,EAAG,aAAc,CAAE,KAAM,MAAO,YAAa,EAAM,GAC7E,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,GAAI,aAAc,CAAE,KAAM,MAAO,YAAa,EAAM,GAC9E,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,EAAG,aAAc,CAAE,KAAM,MAAO,YAAa,EAAM,GAC7E,IAAI,CAAC,aAAa,CAAC,GAAI,GAAI,EAAG,aAAc,CAAE,KAAM,MAAO,YAAa,EAAM,GAC9E,IAAI,CAAC,aAAa,CAAC,EAAG,GAAI,EAAG,aAAc,CAAE,KAAM,MAAO,YAAa,EAAM,EAC/E,E,QAZ2B3B,G,YCER2K,GAAN,Y,SAAMA,kB,qBAAAA,a,EAAN,aAAMA,YAAAA,WAAAA,EACnB,gBAAgB,CAAG,KACnB,oBAAoB,CAAG,G,gBAFJA,YAAAA,GAInB,AAJmBA,YAAAA,SAAAA,CAIb1H,QAGL,CAHD,W,wBAAA,mB,uDACE,O,EAAM2H,A,gBALWD,YAAAA,SAAAA,EAAAA,WAAAA,GAKXC,IAAAA,CAAAA,G,eAAN,SACAC,AAAAA,GAAAA,GAAAA,CAAAA,AAAAA,EAAyB,EAAK,OAAO,E,MACvC,I,EAPmBF,W,EAAoB3K,G,8CCa1B,e,uCAaX,I,EAAoB8K,EAAdC,EAAcD,MAAAA,CAAAA,EAAAA,AADT,IAAI5M,gBAAgBC,OAAO,QAAQ,CAAC,MAAM,EAC9B,GAAG,CAAC,cAAa,EAApB2M,EAAyB,sB,SAG7C,qBAAM,CACJ,aAAcC,EAAAA,EACd,iBAAkB,GAClB,yBAA0B,EAC5B,E,GAnBF,MAAM,CAAG,CACP,eAAgB,W,OAAM,EAAK,cAAc,E,EACzC,kBAAmB,W,OAAM,EAAK,cAAc,CAAC,G,CAC/C,E,EAGQ,cAAc,CAAiC,OAC/C,cAAc,CAAkB,EAAE,CAcxC,EAAK,WAAW,CAAGA,E,kDAIrB,EAAe9H,QAOd,CAPD,W,wBAAA,mB,uDACE,O,EAAM2H,A,gDAAAA,IAAAA,CAAAA,G,WAAN,S,CAGI,EAAK,WAAW,CAAhB,O,KACF,O,EAAM,EAAK,WAAW,CAAC,EAAK,WAAW,E,QAAvC,S,6BAEJ,I,EAEAjJ,EAAAA,UAWC,CAXDA,WACM,IAAI,CAAC,WAAW,GAIpB,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,SAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,eAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,QAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,eAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,WAC5B,IAAI,CAAC,aAAa,CAAC,EAAG,EAAG,EAAG,cAC9B,EAEA,EAAcqJ,WAwDb,CAxDD,SAA2BC,CAAW,E,iBAAtC,mB,IAqBIpI,EAfgBqI,EAIOC,EAAfzI,EAAOF,EACTD,EAcF6I,EAGIC,EAiBArN,EACHwB,EAAAA,EAAAA,EAAAA,EAAAA,EAAM8L,E,uDA3CW,O,sBADtBlF,QAAQ,GAAG,CAAC,yBAA0B6E,GAChB,C,EAAMM,AAAAA,GAAAA,GAAAA,EAAAA,AAAAA,EAAyBN,G,WAArD,EAAK,cAAc,CAAG,SAGNC,EAAYM,AAAAA,EAAK,cAAc,CAAvC,MAAM,CACd,EAAK,MAAM,CAAC,QAAQ,CAAC,GAAG,CAACN,EAAQ,QAAQ,CAAC,CAAC,CAAEA,EAAQ,QAAQ,CAAC,CAAC,CAAEA,EAAQ,QAAQ,CAAC,CAAC,EAG3ExI,EAAeyI,AAAAA,CAAAA,EAAAA,EAAQ,QAAQ,AAAD,EAA9BzI,KAAK,CAAEF,EAAQ2I,EAAR3I,GAAG,CACZD,EAAU,IAAI1C,EAAAA,CAAa,CAC/B,CAAC4C,KAAK,GAAG,CAACD,GAAOC,KAAK,GAAG,CAACC,GAC1BD,KAAK,GAAG,CAACC,GACT,CAACD,KAAK,GAAG,CAACD,GAAOC,KAAK,GAAG,CAACC,IAE5B,EAAK,MAAM,CAAC,MAAM,CAChBwI,EAAQ,QAAQ,CAAC,CAAC,CAAG3I,EAAQ,CAAC,CAC9B2I,EAAQ,QAAQ,CAAC,CAAC,CAAG3I,EAAQ,CAAC,CAC9B2I,EAAQ,QAAQ,CAAC,CAAC,CAAG3I,EAAQ,CAAC,E,MAEhCM,CAAAA,EAAAA,EAAK,QAAQ,AAAD,GAAZA,EAAe,MAAM,GACrB,EAAK,mBAAmB,G,CAIpB,EAAK,cAAc,CAAC,mBAAmB,CAAvC,O,KAEc,O,EAAM4I,AAAAA,GAAAA,GAAAA,EAAAA,AAAAA,EAAuB,EAAK,cAAc,CAAC,mBAAmB,E,eAA9EJ,EAAU,SAChBD,EAAW,IAAIvL,GAAAA,CAAyB,CAAC,CACvC,IAAKwL,EACL,aAAc,GACd,YAAa,GACb,UAAW,EACb,G,aAIAD,EAAW,EAAK,aAAa,CAAC,QAAQ,C,iBAIxC,EAAK,cAAc,CAAGM,AAAAA,GAAAA,GAAAA,EAAAA,AAAAA,EAAuB,EAAK,cAAc,CAAEN,GAG1DpN,EAAU,EAAK,aAAa,CAA5BA,KAAK,CACRwB,EAAAA,GAAAA,EAAAA,GAAAA,EAAAA,KAAAA,E,IAAL,IAAKA,EAAc,EAAK,cAAc,qBAAjCA,CAAAA,EAAAA,AAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,AAAAA,EAAAA,EAAAA,GAAM8L,EAAN9L,EAAAA,KAAAA,CACHxB,EAAM,GAAG,CAACsN,E,UADP9L,EAAAA,GAAAA,EAAAA,C,aAAAA,GAAAA,AAAAA,MAAAA,EAAAA,MAAAA,EAAAA,EAAAA,MAAAA,E,YAAAA,E,MAAAA,C,SAIL4G,QAAQ,GAAG,CAAE,UAAoC,OAA3B,EAAK,cAAc,CAAC,MAAM,CAAC,iCACjD,EAAK,aAAa,G,oBAGlBA,QAAQ,KAAK,CAAC,2BADPqB,EAAAA,IAAAA,I,yBAGX,I,EAEA,EAAQkE,cA4BP,CA5BD,W,IAAwBC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,AAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,SAAAA,CAAAA,EAAAA,CACdC,EAAkB,IAAI,CAAtBA,aAAa,CACrB,GAAI,CAACA,EAAe,YAClBzF,QAAQ,KAAK,CAAC,+BAKhB,IAAM0F,EAAiB,CACrB,EAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CACzB,EAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CACzB,EAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,AAC3B,EAGMvJ,EAAU,IAAI1C,EAAAA,CAAa,CAAC,EAAG,EAAG,IACxC0C,EAAQ,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAC9C,IAAMwJ,EAAiB,CACrB,IAAKtJ,KAAK,KAAK,CAAC,CAACF,EAAQ,CAAC,CAAE,CAACA,EAAQ,CAAC,EACtC,MAAOE,KAAK,IAAI,CAACF,EAAQ,CAAC,CAC5B,EAGMyJ,EAAY,IAAIC,OAAO,WAAW,GAAG,UAAU,CAAC,QAAS,KACzDC,EAAY,kBAA2B,OAAVF,EAAU,SAE7CG,AAAAA,GAAAA,GAAAA,EAAAA,AAAAA,EAAsBN,EAAeC,EAAgBC,EAAgBG,EAAUN,GAC/ExF,QAAQ,GAAG,CAAC,wBAAyB8F,EACvC,E,QAtI2BlM,GCbvBoM,GAAU,IAAIlO,gBAAgBC,OAAO,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,SAC1DkO,GAAoCD,GAAU3O,CAAM,CAAC2O,GAAQ,CAAG3O,EACtEZ,CAAAA,EAAwB,MAAM,CAAG,CAAC,OAAQ,cAAe,cAAe,oBAAqB,oBAAqB,WAAY,kBAAmB,oBAAqB,cAAe,iBAAiB,CACtMA,EAAwB,QAAQ,CAAGuP,MAAAA,GAAAA,GAAW,OAE9C,IAAMpO,GAAQ,IAAIqO,EAClBC,CAAAA,WAAW,KAAK,CAAGtO,E"}